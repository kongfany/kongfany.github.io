<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Springboot项目 - 乐观积极的...</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="kong" /><meta name="description" content="青戈-带小白做毕设系列学习 视频 技术栈: 前端：html,css,javascript,vue,element-ui 后端：java,spring" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.87.0 with theme even" />


<link rel="canonical" href="https://kongfany.github.io/post/springbootproject/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Springboot项目" />
<meta property="og:description" content="青戈-带小白做毕设系列学习 视频 技术栈: 前端：html,css,javascript,vue,element-ui 后端：java,spring" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kongfany.github.io/post/springbootproject/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-08-14T09:46:52+08:00" />
<meta property="article:modified_time" content="2024-08-14T09:46:52+08:00" />

<meta itemprop="name" content="Springboot项目">
<meta itemprop="description" content="青戈-带小白做毕设系列学习 视频 技术栈: 前端：html,css,javascript,vue,element-ui 后端：java,spring"><meta itemprop="datePublished" content="2024-08-14T09:46:52+08:00" />
<meta itemprop="dateModified" content="2024-08-14T09:46:52+08:00" />
<meta itemprop="wordCount" content="19726">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Springboot项目"/>
<meta name="twitter:description" content="青戈-带小白做毕设系列学习 视频 技术栈: 前端：html,css,javascript,vue,element-ui 后端：java,spring"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">乐观积极的...</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">乐观积极的...</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Springboot项目</h1>

      <div class="post-meta">
        <span class="post-time"> 2024-08-14 </span>
        <div class="post-category">
            <a href="/categories/spring-boot/"> Spring Boot </a>
            </div>
          <span class="more-meta"> 19726 words </span>
          <span class="more-meta"> 40 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#htmlcss">html,css</a></li>
        <li><a href="#js">JS</a></li>
        <li><a href="#vue">vue</a>
          <ul>
            <li><a href="#vue脚手架搭建">Vue脚手架搭建</a></li>
            <li><a href="#idea启动vue--清空内容">idea启动vue&ndash;清空内容</a></li>
          </ul>
        </li>
        <li><a href="#elementui">ElementUI</a></li>
        <li><a href="#vue管理系统">Vue管理系统</a></li>
        <li><a href="#springboot">springboot</a>
          <ul>
            <li><a href="#统一返回result对象">统一返回result对象</a></li>
          </ul>
        </li>
        <li><a href="#http">HTTP</a>
          <ul>
            <li><a href="#post">post</a></li>
            <li><a href="#delete">delete</a></li>
          </ul>
        </li>
        <li><a href="#mybatis">mybatis</a>
          <ul>
            <li><a href="#新增post-insert">新增post-insert</a></li>
            <li><a href="#更新-put-updata">更新 put-updata</a></li>
            <li><a href="#删除-delete">删除 delete</a></li>
            <li><a href="#查询get-select">查询：get-select</a></li>
          </ul>
        </li>
        <li><a href="#前后端交互">前后端交互</a>
          <ul>
            <li><a href="#封装请求工具类">封装请求工具类</a></li>
          </ul>
        </li>
        <li><a href="#vue登录注册">vue登录注册</a>
          <ul>
            <li><a href="#登录界面">登录界面</a></li>
            <li><a href="#登录接口">登录接口</a></li>
            <li><a href="#抛出自定义异常">抛出自定义异常</a></li>
            <li><a href="#验证码组件">验证码组件</a></li>
            <li><a href="#跨域问题">跨域问题</a></li>
            <li><a href="#注册界面">注册界面</a></li>
          </ul>
        </li>
        <li><a href="#jwt-token实现权限验证">JWT token实现权限验证</a>
          <ul>
            <li><a href="#自定义拦截器">自定义拦截器</a></li>
            <li><a href="#拦截器配置">拦截器配置</a></li>
            <li><a href="#token工具类">token工具类</a></li>
            <li><a href="#生成token">生成token</a></li>
            <li><a href="#自定义注解">自定义注解</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>青戈-带小白做毕设系列学习</p>
<p><a href="https://www.bilibili.com/video/BV1g94y1e7MW/?spm_id_from=333.788&amp;vd_source=ad42090d7d6fcdfc144126ae0e2884ac">视频</a></p>
</blockquote>
<p>技术栈:</p>
<p>前端：html,css,javascript,vue,element-ui</p>
<p>后端：java,springboot,mybatis,mybatis-plus</p>
<p>数据库：mysql</p>
<p>服务器：腾讯云linux</p>
<p>小程序：uniapp -<a href="https://www.bilibili.com/video/BV1xX4y1n7pq/?spm_id_from=333.999.0.0&amp;vd_source=ad42090d7d6fcdfc144126ae0e2884ac">视频</a> -<a href="https://space.bilibili.com/402779077/search/video?keyword=%E6%9C%89%E6%89%8B%E5%B0%B1%E4%BC%9A">有手就会系列</a></p>
<p>后续工具：redis,RDM,natapp,Xshell&amp;Xftp(服务器部署工具)</p>
<p>vue2，springboot2</p>
<h2 id="htmlcss">html,css</h2>
<h2 id="js">JS</h2>
<h2 id="vue">vue</h2>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1c14y1z7SN/?spm_id_from=333.788&amp;vd_source=ad42090d7d6fcdfc144126ae0e2884ac">视频</a></p>
<p>vue2:<a href="https://v2.cn.vuejs.org/">官网</a> ,<a href="https://v2.cn.vuejs.org/v2/guide/">教程</a></p>
<p>插件市场过慢：https://blog.csdn.net/m0_52163205/article/details/136241055</p>
<p>IDEA导入vue插件，https://www.jb51.net/javascript/320084g3g.htm</p>
</blockquote>
<ul>
<li>{{}} 变量、表达式渲染</li>
<li>v-html html模板，渲染html</li>
<li>v-model 绑定值（双向绑定）</li>
<li>v-if v-else-if v-else判断</li>
<li>v-bind 简写：绑定属性</li>
<li>V-on 简写@ 事件绑定</li>
<li>V-for循环</li>
<li>动态class style</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Vue学习<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="c">&lt;!--样式--&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">.</span><span class="nc">active</span><span class="p">{</span>
            <span class="k">color</span><span class="p">:</span> <span class="kc">chartreuse</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="c">&lt;!--创建message变量--&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
        {{ message }}
        <span class="c">&lt;!--num++不好用--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            {{num+1}}
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{bool}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{bool ? &#39;a&#39;:&#39;b&#39;}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{arr.find(v=&gt;v.name===&#39;张三&#39; )?.age}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="c">&lt;!--        html模版渲染--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span>  <span class="na">v-html</span><span class="o">=</span><span class="s">&#34;htmlStr&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="c">&lt;!--        绑定值，双向绑定,input框和div的值对应,同步展示--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;value&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{value}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="c">&lt;!--if,满足条件才进行渲染--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;color===&#39;红色&#39;&#34;</span><span class="p">&gt;</span>红色<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;color===&#39;蓝色&#39;&#34;</span><span class="p">&gt;</span>蓝色<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-else-if</span><span class="o">=</span><span class="s">&#34;color===&#39;黑色&#39;&#34;</span><span class="p">&gt;</span>黑色<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-else</span><span class="p">&gt;</span>白色<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="c">&lt;!--        绑定属性，简写为：--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">v-bind:href</span><span class="o">=</span><span class="s">&#34;url&#34;</span><span class="p">&gt;</span>搜索一下<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="c">&lt;!--        简写，里面必须是字符串--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">:href</span><span class="o">=</span><span class="s">&#34;&#39;https://www.baidu.com&#39;&#34;</span><span class="p">&gt;</span>搜索一下<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">:href</span><span class="o">=</span><span class="s">&#34;&#39;url&#39;&#34;</span><span class="p">&gt;</span>搜索一下<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="c">&lt;!--        事件绑定 简写@，按钮，绑定一个click事件，改变样式--&gt;</span>
<span class="c">&lt;!--        &lt;div style=&#34;width: 100px;height: 50px;background-color: aqua&#34; v-on:click=&#34;clickDiv&#34; id=&#34;div&#34;&gt;&lt;/div&gt;--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100px;height: 50px;background-color: aqua&#34;</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;clickDiv&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;div&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="c">&lt;!--        循环渲染 key:为每个元素提供一个索引--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;(item,index) in fruits&#34;</span> <span class="na">:key</span><span class="o">=</span><span class="s">&#34;index&#34;</span><span class="p">&gt;</span>{{index+1 +&#34;.&#34;+item}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;item in users&#34;</span><span class="na">:key</span><span class="o">=</span><span class="s">&#34;item.name&#34;</span><span class="p">&gt;</span>{{item.name}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="c">&lt;!--        动态绑定class，水平排列--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex;margin-top: 30px&#34;</span><span class="p">&gt;</span>
<span class="c">&lt;!--            下拉框--&gt;</span>
            <span class="p">&lt;</span><span class="nt">select</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;currentMenu&#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;首页&#34;</span><span class="p">&gt;</span>首页<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;教师&#34;</span><span class="p">&gt;</span>教师<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;学生&#34;</span><span class="p">&gt;</span>学生<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;padding: 0 10px&#34;</span> <span class="na">:style</span><span class="o">=</span><span class="s">&#34;{fontSize: item===currentMenu ? &#39;20px&#39;:&#39;14px&#39;}&#34;</span> <span class="na">:class</span><span class="o">=</span><span class="s">&#34;{&#39;active&#39;:item===currentMenu }&#34;</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&#34;item in menus&#34;</span><span class="na">:key</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>{{item}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="c1">//新的vue实例
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
            <span class="nx">el</span><span class="o">:</span> <span class="s1">&#39;#app&#39;</span><span class="p">,</span><span class="c1">//element，vue实例绑定到div上，div的语法会基于这个vue生效
</span><span class="c1"></span>            <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Hello Vue!&#39;</span><span class="p">,</span><span class="c1">//将变量的值渲染为html字符串
</span><span class="c1"></span>                <span class="nx">num</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
                <span class="nx">bool</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">arr</span><span class="o">:</span><span class="p">[{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;张三&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">20</span><span class="p">}],</span><span class="c1">//数组
</span><span class="c1"></span>                <span class="nx">htmlStr</span><span class="o">:</span><span class="s1">&#39;&lt;strong id=&#34;htmlId&#34; style=&#34;color: darkseagreen&#34;&gt;html模版字符串渲染测试&lt;/strong&gt;&#39;</span><span class="p">,</span>
                <span class="nx">value</span><span class="o">:</span><span class="s1">&#39;0&#39;</span><span class="p">,</span>
                <span class="nx">color</span><span class="o">:</span><span class="s1">&#39;黑色&#39;</span><span class="p">,</span>
                <span class="nx">url</span><span class="o">:</span><span class="s1">&#39;https://www.baidu.com&#39;</span><span class="p">,</span>
                <span class="nx">fruits</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;苹果&#39;</span><span class="p">,</span><span class="s1">&#39;香蕉&#39;</span><span class="p">,</span><span class="s1">&#39;西瓜&#39;</span><span class="p">,</span><span class="s1">&#39;西瓜&#39;</span><span class="p">],</span>
                <span class="nx">users</span><span class="o">:</span><span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;用户1 &#39;</span><span class="p">},{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;用户2&#39;</span><span class="p">}],</span>
                <span class="nx">menus</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;首页&#39;</span><span class="p">,</span><span class="s1">&#39;教师&#39;</span><span class="p">,</span><span class="s1">&#39;学生&#39;</span><span class="p">],</span>
                <span class="nx">currentMenu</span><span class="o">:</span><span class="s1">&#39;首页&#39;</span>
            <span class="p">},</span>
            <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
                <span class="nx">clickDiv</span><span class="p">(){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;点击了div&#34;</span><span class="p">)</span>
                    <span class="kd">let</span> <span class="nx">color</span> <span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span>
                    <span class="c1">//点击 改变颜色
</span><span class="c1"></span>                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="o">=</span><span class="nx">color</span><span class="o">===</span><span class="s1">&#39;blue&#39;</span><span class="o">?</span><span class="s1">&#39;aqua&#39;</span><span class="o">:</span><span class="s1">&#39;blue&#39;</span>
                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;htmlId&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span><span class="o">=</span><span class="s1">&#39;gold&#39;</span>

                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/2024/55.png" alt=""></p>
<h3 id="vue脚手架搭建">Vue脚手架搭建</h3>
<blockquote>
<p>nodejs安装 <a href="https://nodejs.org/zh-cn/download/prebuilt-installer">官网</a>，<a href="https://blog.csdn.net/weixin_44259233/article/details/139743886">教程</a>,<a href="https://blog.csdn.net/weixin_54626591/article/details/140079692">1</a></p>
<p>vue cli 脚手架 <a href="https://cli.vuejs.org/zh/guide/">官网</a></p>
</blockquote>
<p>vuecli</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 安装</span>
npm config <span class="nb">set</span> registry http://registry.npm.taobao.org
npm install -g @vue/cli

C:<span class="se">\W</span>indows<span class="se">\S</span>ystem32&gt;VUE -VERSION
@vue/cli 5.0.8

<span class="c1"># 创建项目vue</span>
vue create vue

&gt; Manually <span class="k">select</span> features
&gt;<span class="o">(</span>*<span class="o">)</span> Babel
&gt;<span class="o">(</span>*<span class="o">)</span> Router
&gt; 2.x
y	
&gt; In package.json
n

<span class="nb">cd</span> vue
npm run serve

  App running at:
  - Local:   http://localhost:8080/
  - Network: http://192.168.238.23:8080/
</code></pre></td></tr></table>
</div>
</div><ul>
<li>src-views:放置页面源代码的位置</li>
<li>assets:静态文件（图片，css，js的位置</li>
<li>components：组件 vue文件，可以作为一个单独的引用&ndash;浓缩为一个标签</li>
<li>router:路由，地址栏发生变化称为路由的切换，一个路由代表一个页面，把路由和页面联系起来</li>
<li>main.js:全局对象的挂载，#app-div的id，new一个实例挂载到div中，所有的对象都会在div中去渲染</li>
<li>package.json:vue工程的所有依赖</li>
<li>vue.config.js:工程的全局配置文件</li>
</ul>
<h3 id="idea启动vue--清空内容">idea启动vue&ndash;清空内容</h3>
<p><img src="/images/2024/56.png" alt=""></p>
<p>vue.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@vue/cli-service&#39;</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">defineConfig</span><span class="p">({</span>
  <span class="nx">transpileDependencies</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">port</span><span class="o">:</span><span class="mi">7000</span>
  <span class="p">},</span>
   <span class="nx">chainWebpack</span><span class="o">:</span><span class="nx">config</span> <span class="p">=&gt;</span>
      <span class="nx">config</span><span class="p">.</span><span class="nx">plugin</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">).</span><span class="nx">tap</span><span class="p">(</span><span class="nx">args</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;vue学习&#39;</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">args</span><span class="p">;</span>
      <span class="p">})</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>app.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">router-view</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>views-homeview.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">主页</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;HomeView&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>router-index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kr">import</span> <span class="nx">VueRouter</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueRouter</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span>
    <span class="c1">// component: HomeView
</span><span class="c1"></span>    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;../views/HomeView.vue&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VueRouter</span><span class="p">({</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;history&#39;</span><span class="p">,</span>
  <span class="nx">base</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BASE_URL</span><span class="p">,</span>
  <span class="nx">routes</span>
<span class="p">})</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span>

</code></pre></td></tr></table>
</div>
</div><p>assets-css-gloabl.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="c">/*所有的元素都改为盒状模型*/</span>
<span class="o">*</span><span class="p">{</span>
    <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">body</span><span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#333</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>main.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="kr">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s1">&#39;./router&#39;</span>

<span class="kr">import</span> <span class="s1">&#39;@/assets/css/global.css&#39;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">router</span><span class="p">,</span>
  <span class="nx">render</span><span class="o">:</span> <span class="nx">h</span> <span class="p">=&gt;</span> <span class="nx">h</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="elementui">ElementUI</h2>
<blockquote>
<p>ElementUI<a href="https://element.eleme.cn/#/zh-CN">官网</a></p>
</blockquote>
<p>安装</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">npm i element-ui -S
</code></pre></td></tr></table>
</div>
</div><p>nrm管理镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 安装</span>
npm install -g nrm
<span class="c1"># 镜像列表</span>
nrm ls
<span class="c1"># 切换镜像</span>
nrm use taobao
<span class="c1"># 当前镜像</span>
nrm current 
</code></pre></td></tr></table>
</div>
</div><p>main.js引入elementui</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">ElementUI</span> <span class="nx">from</span> <span class="s1">&#39;element-ui&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="s1">&#39;element-ui/lib/theme-chalk/index.css&#39;</span><span class="p">;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">ElementUI</span><span class="p">,{</span><span class="nx">size</span><span class="o">:</span><span class="s1">&#39;small&#39;</span><span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>并在route-index.js中配置路由-把路由和页面连接起来</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/element&#39;</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Element&#39;</span><span class="p">,</span>
  <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;../views/Element.vue&#39;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>views-element.vue 页面</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="c">&lt;!--</span><span class="nx">一个网页是24等份</span><span class="err">，</span><span class="mi">12</span><span class="nx">占一半</span><span class="p">,</span><span class="nx">gutter间隔</span><span class="o">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">el-row</span> <span class="nt">:gutter</span><span class="s">=&#34;20&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-col</span> <span class="nt">:span</span><span class="s">=&#34;12&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%;height: 100px;background-color: deepskyblue&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="o">&lt;</span><span class="err">/el-col&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-col</span> <span class="nt">:span</span><span class="s">=&#34;12&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%;height: 100px;background-color: palevioletred&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="o">&lt;</span><span class="err">/el-col&gt;</span>
    <span class="o">&lt;</span><span class="err">/el-row&gt;</span>
      
      
    <span class="p">&lt;</span><span class="nt">el-row</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-col</span> <span class="nt">:span</span><span class="s">=&#34;3&#34;</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>        <span class="nx">边框</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;padding: 10px;border: 1px solid #ccc;text-align: center&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;80%&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;@/assets/logo.png&#34;</span> <span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;text-align: center&#34;</span><span class="p">&gt;</span><span class="nx">图片名</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: red&#34;</span><span class="p">&gt;</span><span class="nx">价格$99</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="o">&lt;</span><span class="err">/el-col&gt;</span>
    <span class="o">&lt;</span><span class="err">/el-row&gt;</span>
      
      
    <span class="p">&lt;</span><span class="nt">el-row</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-col</span> <span class="nt">:span</span><span class="s">=&#34;24&#34;</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">el-button</span><span class="p">&gt;</span><span class="nx">默认按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span><span class="p">&gt;</span><span class="nx">主要按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;danger&#34;</span><span class="p">&gt;</span><span class="nx">危险按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;success&#34;</span><span class="p">&gt;</span><span class="nx">成功按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;</span><span class="nx">信息按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;warning&#34;</span><span class="p">&gt;</span><span class="nx">警告按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">plain</span><span class="p">&gt;</span><span class="nx">朴素主要按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">round</span><span class="p">&gt;</span><span class="nx">圆角主要按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">icon</span><span class="o">=</span><span class="s">&#34;el-icon-edit&#34;</span> <span class="na">circle</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;danger&#34;</span> <span class="na">icon</span><span class="o">=</span><span class="s">&#34;el-icon-delete&#34;</span> <span class="na">circle</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>



      <span class="o">&lt;</span><span class="err">/el-col&gt;</span>
    <span class="o">&lt;</span><span class="err">/el-row&gt;</span>
      
      <span class="p">&lt;</span><span class="nt">el-row</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;margin-top: 20px&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-col</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width:200px &#34;</span> <span class="nt">v-model</span><span class="s">=&#34;value&#34; placeholder=&#34;请输入内容&#34;&gt;&lt;/el-input&gt;
</span><span class="s">        &lt;el-input type=&#34;textarea&#34; style=&#34;width:200px &#34; v-model=&#34;value1&#34;&gt;&lt;/el-input&gt;
</span><span class="s">        &lt;el-input show-password style=&#34;width:200px &#34; v-model=&#34;password&#34; placeholder=&#34;请输入密码&#34;&gt;&lt;/el-input&gt;
</span><span class="s">
</span><span class="s">        &lt;el-input style=&#34;width:200px &#34; v-model=&#34;value2&#34; placeholder=&#34;请输入内容&#34; prefix-icon=&#34;el-icon-search&#34;&gt;&lt;/el-input&gt;
</span><span class="s">        &lt;el-input clearable style=&#34;width:200px &#34; v-model=&#34;value2&#34; placeholder=&#34;请输入内容&#34; suffix-icon=&#34;el-icon-user&#34; &gt;&lt;/el-input&gt;
</span><span class="s">      &lt;/el-col&gt;
</span><span class="s">    &lt;/el-row&gt;
</span><span class="s">
</span><span class="s">
</span><span class="s">&lt;!--    模糊匹配 建议--&gt;
</span><span class="s">    &lt;el-row style=&#34;margin: 20px 0&#34;&gt;
</span><span class="s">      &lt;el-autocomplete placeholder=&#34;请输入内容&#34; :fetch-suggestions=&#34;querySearch&#34;
</span><span class="s">                       :trigger-on-focus=&#34;false&#34; v-model=&#34;value3&#34;&gt;&lt;/el-autocomplete&gt;
</span><span class="s">
</span><span class="s">    &lt;/el-row&gt;
</span><span class="s">      
</span><span class="s">      &lt;!--    下拉框--&gt;
</span><span class="s">    &lt;el-row&gt;
</span><span class="s">      &lt;el-select v-model=&#34;select&#34; @change=&#34;changeSelect&#34; multiple&gt;
</span><span class="s">        &lt;el-option value=&#34;香蕉&#34;&gt;&lt;/el-option&gt;
</span><span class="s">        &lt;el-option value=&#34;苹果&#34;&gt;&lt;/el-option&gt;
</span><span class="s">        &lt;el-option value=&#34;西瓜&#34;&gt;&lt;/el-option&gt;
</span><span class="s">      &lt;/el-select&gt;
</span><span class="s">      &lt;el-select v-model=&#34;select1&#34; @change=&#34;changeSelect&#34;&gt;
</span><span class="s">        &lt;el-option v-for=&#34;item in fruits&#34; :key=&#34;item.id&#34; :value=&#34;item.name&#34;&gt;&lt;/el-option&gt;
</span><span class="s">      &lt;/el-select&gt;
</span><span class="s">
</span><span class="s">&lt;!--      显示输入姓名，实际绑定身份证信息--&gt;
</span><span class="s">      &lt;el-select v-model=&#34;select2&#34; @change=&#34;changeSelectUser&#34; filterable&gt;
</span><span class="s">        &lt;el-option v-for=&#34;item in users &#34; :key=&#34;item.card&#34; :label=&#34;item.label&#34; :value=&#34;item.card&#34;&gt;&lt;/el-option&gt;
</span><span class="s">      &lt;/el-select&gt;
</span><span class="s">
</span><span class="s">    &lt;/el-row&gt;
</span><span class="s">
</span><span class="s">&lt;!--    单选多选--&gt;
</span><span class="s">    &lt;el-row&gt;
</span><span class="s">      &lt;el-radio-group v-model=&#34;radio&#34; @change=&#34;selectRadio&#34;&gt;
</span><span class="s">        &lt;el-radio label=&#34;男&#34;&gt;&lt;/el-radio&gt;
</span><span class="s">        &lt;el-radio label=&#34;女&#34;&gt;&lt;/el-radio&gt;
</span><span class="s">      &lt;/el-radio-group&gt;
</span><span class="s">
</span><span class="s">      &lt;el-checkbox-group v-model=&#34;checkList&#34; @change=&#34;selectCheckBox&#34;&gt;
</span><span class="s">        &lt;el-checkbox label=&#34;复选框 A&#34;&gt;&lt;/el-checkbox&gt;
</span><span class="s">        &lt;el-checkbox label=&#34;复选框 B&#34;&gt;&lt;/el-checkbox&gt;
</span><span class="s">        &lt;el-checkbox label=&#34;复选框 C&#34;&gt;&lt;/el-checkbox&gt;
</span><span class="s">      &lt;/el-checkbox-group&gt;
</span><span class="s">
</span><span class="s">      &lt;el-date-picker v-model=&#34;date&#34; type=&#34;date&#34; placeholder=&#34;选择日期&#34;
</span><span class="s">                      value-format=&#34;yyyy-MM-dd&#34; @change=&#34;changeDate&#34;&gt;&lt;/el-date-picker&gt;
</span><span class="s">&lt;!--      2024-08-19 10:28:40--&gt;
</span><span class="s">      &lt;el-date-picker v-model=&#34;datetime&#34; type=&#34;datetime&#34; placeholder=&#34;选择日期时间&#34;
</span><span class="s">                      value-format=&#34;yyyy-MM-dd HH:mm:ss&#34; @change=&#34;changeDateTime&#34;&gt;&lt;/el-date-picker&gt;
</span><span class="s">         &lt;el-date-picker v-model=&#34;daterange&#34; type=&#34;daterange&#34; value-format=&#34;yyyy-MM-dd&#34;
</span><span class="s">                      start-placeholder=&#34;开始日期&#34;
</span><span class="s">                      end-placeholder=&#34;结束日期&#34; @change=&#34;changeDaterRange&#34;&gt;
</span><span class="s">      &lt;/el-date-picker&gt;
</span><span class="s">    &lt;/el-row&gt;
</span><span class="s">      
</span><span class="s">          &lt;el-row style=&#34;margin: 100px 0&#34;  &gt;
</span><span class="s">      &lt;el-table :data=&#34;tableDate&#34; border :header-cell-style=&#34;{background:&#39;aliceblue&#39;,fontSize:&#39;14px&#39;}&#34;&gt;
</span><span class="s">        &lt;el-table-column label=&#34;序号&#34; prop=&#34;id&#34; align=&#34;center&#34;&gt;&lt;/el-table-column&gt;
</span><span class="s">        &lt;el-table-column label=&#34;姓名&#34; prop=&#34;name&#34; align=&#34;center&#34;&gt;&lt;/el-table-column&gt;
</span><span class="s">        &lt;el-table-column label=&#34;年龄&#34; prop=&#34;age&#34; align=&#34;center&#34;&gt;&lt;/el-table-column&gt;
</span><span class="s">        &lt;el-table-column label=&#34;地址&#34; prop=&#34;address&#34; align=&#34;center&#34;&gt;&lt;/el-table-column&gt;
</span><span class="s">        &lt;el-table-column label=&#34;操作&#34; &gt;
</span><span class="s">          &lt;template v-slot=&#34;scope&#34;&gt;
</span><span class="s">            &lt;el-button type=&#34;primary&#34; @click=&#34;edit(scope.row)&#34;</span><span class="p">&gt;</span><span class="na">编辑</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-button</span><span class="p">&gt;</span>

          <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
        <span class="o">&lt;</span><span class="err">/el-table-column&gt;</span>
      <span class="o">&lt;</span><span class="err">/el-table&gt;</span>

    <span class="o">&lt;</span><span class="err">/el-row&gt;</span>
  
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="c">&lt;!--</span><span class="nx">响应式数据value</span><span class="o">--&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Element&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span><span class="p">{</span>
      <span class="nx">value</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">value1</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">password</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">value2</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">value3</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">coffees</span><span class="o">:</span><span class="p">[{</span><span class="nx">value</span><span class="o">:</span><span class="s1">&#39;1瑞幸&#39;</span><span class="p">},{</span><span class="nx">value</span><span class="o">:</span><span class="s1">&#39;2星巴克&#39;</span><span class="p">},{</span><span class="nx">value</span><span class="o">:</span><span class="s1">&#39;3库迪&#39;</span><span class="p">}],</span>
      <span class="nx">select</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">select1</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">select2</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">fruits</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;香蕉&#39;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;苹果&#39;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;西瓜&#39;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="mi">3</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="nx">users</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;用户1&#39;</span><span class="p">,</span><span class="nx">card</span><span class="o">:</span><span class="s1">&#39;111111&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;用户2&#39;</span><span class="p">,</span><span class="nx">card</span><span class="o">:</span><span class="s1">&#39;222222&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;用户3&#39;</span><span class="p">,</span><span class="nx">card</span><span class="o">:</span><span class="s1">&#39;333333&#39;</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="nx">radio</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">checkList</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">date</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">datetime</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">daterange</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">tableDate</span><span class="o">:</span><span class="p">[</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;kong&#39;</span><span class="p">,</span><span class="nx">address</span><span class="o">:</span><span class="s2">&#34;徐州&#34;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="s1">&#39;20&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;kong&#39;</span><span class="p">,</span><span class="nx">address</span><span class="o">:</span><span class="s2">&#34;徐州&#34;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="s1">&#39;20&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;kong&#39;</span><span class="p">,</span><span class="nx">address</span><span class="o">:</span><span class="s2">&#34;徐州&#34;</span><span class="p">,</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="s1">&#39;20&#39;</span><span class="p">},</span>
      <span class="p">]</span>
   <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">querySearch</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="nx">cb</span><span class="p">){</span> <span class="c1">//callback
</span><span class="c1"></span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span><span class="nx">query</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">coffees</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">query</span><span class="p">))</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">coffees</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">changeSelect</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">select</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">changeSelectUser</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">select2</span><span class="p">)</span>

    <span class="p">},</span>
    <span class="nx">selectRadio</span><span class="p">(){</span>
    <span class="c1">//  弹出事件
</span><span class="c1"></span>      <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">radio</span><span class="p">)</span>

    <span class="p">},</span>
    <span class="nx">selectCheckBox</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">checkList</span><span class="p">)</span>

    <span class="p">},</span>
    <span class="nx">changeDate</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">date</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">changeDateTime</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">datetime</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">changeDaterRange</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">daterange</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">edit</span><span class="p">(</span><span class="nx">row</span><span class="p">){</span>
      <span class="c1">// alert(row.name)
</span><span class="c1"></span>      <span class="c1">// 弹窗
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
      <span class="c1">// this.$message.warning(row.name)
</span><span class="c1"></span>      <span class="c1">// this.$message.error(row.name)
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">$notify</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="s1">&#39;是否确认?&#39;</span><span class="p">,</span><span class="s1">&#39;确认提示窗&#39;</span><span class="p">,{</span>
        <span class="nx">type</span><span class="o">:</span><span class="s2">&#34;warning&#34;</span>
      <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s2">&#34;ok,点击了确认&#34;</span><span class="p">)</span>
      <span class="p">}).</span><span class="k">catch</span><span class="p">(()=&gt;{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s2">&#34;ok,点击了取消&#34;</span><span class="p">)</span>
      <span class="p">})</span>

    <span class="p">}</span>

  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>el-col：将网页分为几等分(一个网页是24份)layout布局</li>
<li>el-button:按钮</li>
<li>el-input:输入框 el-select:下拉框</li>
<li>el-radio：单选框 el-checkbox：多选框</li>
<li>el-table:表格</li>
<li>http://localhost:7000/element</li>
</ul>
<p><img src="/images/2024/57.png" alt=""></p>
<h2 id="vue管理系统">Vue管理系统</h2>
<blockquote>
<p>icon：https://www.iconfont.cn/</p>
</blockquote>
<p>Container 布局容器：盒子模型 aside+header+main</p>
<p>用于布局的容器组件，方便快速搭建页面的基本结构：</p>
<p><code>&lt;el-container&gt;</code>：外层容器。当子元素中包含 <code>&lt;el-header&gt;</code> 或 <code>&lt;el-footer&gt;</code> 时，全部子元素会垂直上下排列，否则会水平左右排列。</p>
<p><code>&lt;el-header&gt;</code>：顶栏容器。</p>
<p><code>&lt;el-aside&gt;</code>：侧边栏容器。</p>
<p><code>&lt;el-main&gt;</code>：主要区域容器。</p>
<p><code>&lt;el-footer&gt;</code>：底栏容器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="c">&lt;!--</span>    <span class="nx">外部盒子</span><span class="o">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">el-container</span><span class="p">&gt;</span>
      <span class="c">&lt;!--</span>      <span class="nx">侧边栏</span><span class="o">--&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-aside</span><span class="p">&gt;</span>

      <span class="o">&lt;</span><span class="err">/el-aside&gt;</span>
      <span class="p">&lt;</span><span class="nt">el-container</span><span class="p">&gt;</span>
        <span class="c">&lt;!--</span>        <span class="nx">头部区域</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-header</span><span class="p">&gt;</span>

        <span class="o">&lt;</span><span class="err">/el-header&gt;</span>
        <span class="c">&lt;!--</span>        <span class="nx">主体区域</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-main</span><span class="p">&gt;</span>

        <span class="o">&lt;</span><span class="err">/el-main&gt;</span>
      <span class="o">&lt;</span><span class="err">/el-container&gt;</span>

    <span class="o">&lt;</span><span class="err">/el-container&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue">	<span class="p">&lt;</span><span class="nt">el-aside</span> <span class="nt">:width</span><span class="s">=&#34;asideWidth&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;min-height: 100vh;background-color: #001529&#34;</span>  <span class="p">&gt;</span>
<span class="c">&lt;!--</span>        <span class="nx">logo</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;height: 60px;color: white;display: flex;align-items: center;justify-content: center&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;@/assets/logo1.jpg&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 40px;height: 40px&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">span</span>  <span class="na">class</span><span class="o">=</span><span class="s">&#34;logo-tittle&#34;</span> <span class="nt">v-show</span><span class="s">=&#34;!isCollapse&#34;</span><span class="p">&gt;</span><span class="na">kong2024</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="err">&lt;!--</span>        <span class="o">:</span><span class="na">绑定属性</span><span class="err">,</span><span class="na">绑定当前浏览器的路由</span><span class="err">,</span><span class="na">router可点击跳转</span><span class="err">,</span><span class="o">:</span><span class="na">collapse折叠</span><span class="err">--</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-menu</span> <span class="nt">:collapse</span><span class="s">=&#34;isCollapse&#34;</span> <span class="nt">:collapse-transition</span><span class="s">=&#34;false&#34;</span> <span class="na">router</span> <span class="na">background</span><span class="nt">-color</span><span class="err">=&#34;#</span><span class="na">001529</span><span class="err">&#34;</span> <span class="na">text</span><span class="nt">-color</span><span class="err">=&#34;</span><span class="na">rgba</span><span class="err">(</span><span class="na">255</span><span class="err">,</span><span class="na">255</span><span class="err">,</span><span class="na">255</span><span class="err">,</span><span class="na">0.65</span><span class="err">)&#34;</span> <span class="na">active</span><span class="nt">-text-color</span><span class="err">=&#34;#</span><span class="na">fff</span><span class="err">&#34;</span>
                 <span class="na">style</span><span class="o">=</span><span class="s">&#34;border: none&#34;</span> <span class="nt">:default-active</span><span class="s">=&#34;$route.path&#34;</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>          <span class="nx">当且仅当标签是item时</span><span class="err">，</span><span class="nx">index路由才会生效</span><span class="o">--&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-menu-item</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-house&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">系统首页</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-menu-item</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/1&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-house&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">系统首页</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-menu-item</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/2&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-house&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">系统首页</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-menu-item</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/element&#34;</span><span class="p">&gt;</span><span class="nx">Element页面</span><span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-submenu</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/3&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">template</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-menu&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">信息管理</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-menu-item</span><span class="p">&gt;</span><span class="nx">用户信息</span><span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-menu-item</span><span class="p">&gt;</span><span class="nx">管理员信息</span><span class="o">&lt;</span><span class="err">/el-menu-item&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-menu-item</span> <span class="na">index</span><span class="o">=</span><span class="s">&#34;/&#34;</span><span class="p">&gt;</span><span class="nx">系统首页</span><span class="o">&lt;</span><span class="err">/el-menu-item&gt;\</span>

          <span class="o">&lt;</span><span class="err">/el-submenu&gt;</span>
        <span class="o">&lt;</span><span class="err">/el-menu&gt;</span>

      <span class="o">&lt;</span><span class="err">/el-aside&gt;</span>


<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;HomeView&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">isCollapse</span><span class="o">:</span><span class="kc">false</span> <span class="p">,</span><span class="c1">//不收缩
</span><span class="c1"></span>      <span class="nx">asideWidth</span><span class="o">:</span><span class="s1">&#39;200px&#39;</span><span class="p">,</span>
      <span class="nx">collapseIcon</span><span class="o">:</span><span class="s1">&#39;el-icon-s-fold&#39;</span><span class="c1">//标签样式
</span><span class="c1"></span>    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">handleCollapse</span><span class="p">(){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isCollapse</span><span class="o">=!</span><span class="k">this</span><span class="p">.</span><span class="nx">isCollapse</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">asideWidth</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">isCollapse</span> <span class="o">?</span> <span class="s1">&#39;64px&#39;</span><span class="o">:</span><span class="s1">&#39;200px&#39;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">collapseIcon</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">isCollapse</span> <span class="o">?</span> <span class="s1">&#39;el-icon-s-unfold&#39;</span><span class="o">:</span><span class="s1">&#39;el-icon-s-fold&#39;</span>
    <span class="p">},</span>
    <span class="nx">handleFull</span><span class="p">(){</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">requestFullscreen</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span><span class="nx">针对对应结构修改样式</span><span class="o">--&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">--</span><span class="nx">inline</span><span class="p">{</span>
  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">000</span><span class="nx">c17</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*二级菜单的样式,!important强制生效*/</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">--</span><span class="nx">inline</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">{</span>
  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">000</span><span class="nx">c17</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">49</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*鼠标移动菜单字体高亮*/</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="o">:</span><span class="nx">hover</span><span class="p">,.</span><span class="nx">el</span><span class="o">-</span><span class="nx">submenu__title</span><span class="o">:</span><span class="nx">hover</span><span class="p">{</span>
  <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*一级菜单对应的图标 高亮*/</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">submenu__title</span><span class="o">:</span><span class="nx">hover</span> <span class="nx">i</span><span class="p">{</span>
  <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*菜单背景 高亮*/</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">.</span><span class="nx">is</span><span class="o">-</span><span class="nx">active</span><span class="p">{</span>
  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">1890</span><span class="nx">ff</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
  <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
  <span class="nx">width</span><span class="o">:</span> <span class="nx">calc</span><span class="p">(</span><span class="mi">100</span><span class="o">%</span> <span class="o">-</span> <span class="mi">8</span><span class="nx">px</span><span class="p">);</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">.</span><span class="nx">is</span><span class="o">-</span><span class="nx">active</span> <span class="nx">i</span><span class="p">,.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">.</span><span class="nx">is</span><span class="o">-</span><span class="nx">active</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">tooltip</span><span class="p">{</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="o">-</span><span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">{</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
  <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">submenu__title</span><span class="p">{</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
  <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">submenu__icon</span><span class="o">-</span><span class="nx">arrow</span><span class="p">{</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="o">-</span><span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">submenu</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">{</span>
  <span class="nx">min</span><span class="o">-</span><span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">--</span><span class="nx">inline</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">menu</span><span class="o">-</span><span class="nx">item</span><span class="p">.</span><span class="nx">is</span><span class="o">-</span><span class="nx">active</span><span class="p">{</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">45</span><span class="nx">px</span><span class="o">!</span><span class="nx">important</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*收缩动画时间*/</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">aside</span><span class="p">{</span>
  <span class="nx">transition</span><span class="o">:</span> <span class="nx">width</span> <span class="mf">.3</span><span class="nx">s</span><span class="p">;</span>
  <span class="cm">/*阴影*/</span>
  <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span><span class="mi">2</span><span class="nx">px</span> <span class="mi">0</span> <span class="mi">6</span><span class="nx">px</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span><span class="mf">.35</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">logo</span><span class="o">-</span><span class="nx">tittle</span><span class="p">{</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span><span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="mf">.3</span><span class="nx">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">header</span><span class="p">{</span>
  <span class="cm">/*阴影*/</span>
  <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span><span class="mi">2</span><span class="nx">px</span> <span class="mi">0</span> <span class="mi">6</span><span class="nx">px</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span><span class="mf">.35</span><span class="p">);</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>

<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">el-header</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">i</span> <span class="nt">:class</span><span class="s">=&#34;collapseIcon&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;font-size: 22px &#34;</span> <span class="nt">@click</span><span class="s">=&#34;handleCollapse&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
<span class="err">&lt;!--</span>          <span class="na">面包屑</span><span class="err">，</span><span class="na">显示当前页面的路径</span><span class="err">，</span><span class="na">快速返回之前的任意页面</span><span class="err">。--</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-breadcrumb</span> <span class="na">separator</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-arrow-right</span><span class="err">&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;margin-left: 20px&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-breadcrumb-item</span> <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{ path: &#39;/&#39; }&#34;</span><span class="p">&gt;</span><span class="nx">首页</span><span class="o">&lt;</span><span class="err">/el-breadcrumb-item&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-breadcrumb-item</span> <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{ path: &#39;/user&#39; }&#34;</span><span class="p">&gt;</span><span class="nx">用户管理</span><span class="o">&lt;</span><span class="err">/el-breadcrumb-item&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-breadcrumb&gt;</span>

          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex:1;width:0;display:flex;align-items:center; justify-content: end&#34;</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>            <span class="nx">全屏</span><span class="o">--&gt;</span>
            <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-quanping&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;font-size: 22px&#34;</span> <span class="nt">@click</span><span class="s">=&#34;handleFull&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-dropdown</span> <span class="na">placement</span><span class="o">=</span><span class="s">&#34;bottom&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex;align-items: center;cursor:default &#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;@/assets/logo1.jpg&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 40px; height: 40px;margin: 0 5px&#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">管理员</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">el-dropdown-menu</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;dropdown&#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-dropdown-item</span><span class="p">&gt;</span><span class="nx">个人信息</span><span class="o">&lt;</span><span class="err">/el-dropdown-item&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-dropdown-item</span><span class="p">&gt;</span><span class="nx">修改密码</span><span class="o">&lt;</span><span class="err">/el-dropdown-item&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-dropdown-item</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span><span class="nx">退出登录</span><span class="o">&lt;</span><span class="err">/el-dropdown-item&gt;</span>
                <span class="o">&lt;</span><span class="err">/el-dropdown-menu&gt;</span>
            <span class="o">&lt;</span><span class="err">/el-dropdown&gt;</span>

          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="o">&lt;</span><span class="err">/el-header&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">el-main</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;box-shadow:0 0 10px rgba(0,0,0,.1);padding:10px 20px;border-radius: inherit;&#34;</span><span class="p">&gt;</span>
              <span class="nx">早安</span><span class="err">，</span><span class="nx">大胖狗</span><span class="err">，</span><span class="nx">开心快乐每一天</span><span class="err">！</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

          <span class="p">&lt;</span><span class="nt">el-card</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width:500px&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;header&#34;</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;clearfix&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">Demo2024</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="mi">2024</span><span class="nx">demo正式开始了</span><span class="err">！</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;margin-top:20px&#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;margin:10px 0&#34;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="nx">主题色</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span><span class="p">&gt;</span><span class="nx">按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;success&#34;</span><span class="p">&gt;</span><span class="nx">按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;warning&#34;</span><span class="p">&gt;</span><span class="nx">按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">:</span><span class="err">=&#34;</span><span class="na">danger</span><span class="err">&#34;</span><span class="p">&gt;</span><span class="nx">按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;</span><span class="nx">按钮</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-card&gt;</span>


        <span class="o">&lt;</span><span class="err">/el-main&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/2024/58.png" alt=""></p>
<h2 id="springboot">springboot</h2>
<blockquote>
<p>识别并停止占用端口的进程 Windows 系统</p>
<ol>
<li><strong>打开命令提示符（管理员）</strong>：在搜索栏输入<code>cmd</code>，右键点击“命令提示符”并选择“以管理员身份运行”。</li>
<li><strong>查找占用端口的进程</strong>：输入以下命令并按回车，<code>netstat -aon | findstr :8080</code>。这将列出所有在端口8080上监听的进程及其PID（进程ID）。</li>
<li><strong>结束进程</strong>：使用<code>taskkill /F /PID &lt;PID号&gt;</code>命令来结束该进程。将<code>&lt;PID号&gt;</code>替换为你从上一步中获得的PID号。</li>
</ol>
<p>打断点会出现对应信息，本地开发使用debug启动，方便调试</p>
</blockquote>
<p>springboot2.x JDK1.8 java8</p>
<p>依赖：lombok、springweb、mysqldriver、mybatis</p>
<p>项目配置：</p>
<p>设置maven路径和仓库，pom.xml右键 addasmavenproject自动下载</p>
<p>删除文件 .mvm、gitgnore、help、mvnw、mvnw.cmd多余文件</p>
<p>配置编码：搜enc 全设置为utf-8 <img src="/images/2024/59.png" alt=""></p>
<p>修改配置文件application.properties修改为yml文件</p>
<h3 id="统一返回result对象">统一返回result对象</h3>
<p>common-result</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.springboot.common</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Objects</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * ClassName: result
</span><span class="cm"> * Package: com.example.springboot.common
</span><span class="cm"> * Description:
</span><span class="cm"> *
</span><span class="cm"> * @Author kong
</span><span class="cm"> * @Create 2024/8/20 14:36
</span><span class="cm"> * @Version 1.0
</span><span class="cm"> */</span>
<span class="nd">@Data</span> <span class="c1">//get set 方法
</span><span class="c1"></span><span class="nd">@AllArgsConstructor</span><span class="c1">//全参构造
</span><span class="c1"></span><span class="nd">@NoArgsConstructor</span><span class="c1">//无参构造
</span><span class="c1"></span><span class="nd">@Builder</span><span class="c1">//构建者模式
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Result</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CODE_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;200&#34;</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CODE_AUTH_ERROR</span> <span class="o">=</span><span class="s">&#34;401&#34;</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CODE_SYS_ERROR</span> <span class="o">=</span><span class="s">&#34;500&#34;</span><span class="o">;</span>

    <span class="cm">/**
</span><span class="cm">     * 请求返回编码 200 401 404 500
</span><span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">code</span><span class="o">;</span>
    <span class="cm">/**
</span><span class="cm">     * 错误信息
</span><span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">msg</span><span class="o">;</span>
    <span class="cm">/**
</span><span class="cm">     * 返回数据
</span><span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">Object</span> <span class="n">data</span><span class="o">;</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">success</span><span class="o">(){</span>
<span class="c1">//        return new Result(CODE_SUCCESS,&#34;请求成功&#34;,null);
</span><span class="c1"></span>        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">code</span><span class="o">(</span><span class="n">CODE_SUCCESS</span><span class="o">).</span><span class="na">msg</span><span class="o">(</span><span class="s">&#34;请求成功&#34;</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">success</span><span class="o">(</span><span class="n">Object</span> <span class="n">data</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="n">CODE_SUCCESS</span><span class="o">,</span><span class="s">&#34;请求成功&#34;</span><span class="o">,</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">error</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="n">CODE_SYS_ERROR</span><span class="o">,</span><span class="n">msg</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">error</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">,</span><span class="n">String</span> <span class="n">msg</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="n">code</span><span class="o">,</span><span class="n">msg</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">error</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="n">CODE_SYS_ERROR</span><span class="o">,</span><span class="s">&#34;系统错误&#34;</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebController</span> <span class="o">{</span>

<span class="c1">//    默认为/
</span><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">()</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">hello</span><span class="o">(</span> <span class="n">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="nl">
</span><span class="nl">http:</span><span class="c1">//localhost:9090/?name=kong
</span><span class="c1"></span><span class="o">{</span>
  <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
  <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
  <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="s">&#34;kong&#34;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>@Builder 链式的方法 创建user对象 并可设置属性</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">//        alt_enter快捷创建变量
</span><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">name</span><span class="o">(</span><span class="s">&#34;kkk&#34;</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<h2 id="http">HTTP</h2>
<p>postman</p>
<p>f12 网络-fetch-可以看到后台接口数据</p>
<p><img src="/images/2024/60.png" alt=""></p>
<ul>
<li>常规 请求格式
<ul>
<li>同源策略-前端向后端请求数据可能有跨域问题</li>
</ul>
</li>
<li>响应头：content-type:application/json</li>
<li>请求头</li>
</ul>
<p>接口类型</p>
<ul>
<li>get  查询
<ul>
<li>@RequestMapping()
@RequestMapping(method = RequestMethod.GET)
@GetMapping(&quot;/hello&quot;)</li>
</ul>
</li>
<li>post 新增
<ul>
<li>@PostMapping(&quot;/post&quot;)</li>
</ul>
</li>
<li>delete 删除
<ul>
<li>@DeleteMapping(&quot;/delete/{id}&quot;)
public Result delete(@PathVariable Integer id){
return Result.success(id);
}</li>
</ul>
</li>
<li>put 更新
<ul>
<li>@PutMapping(&quot;/put&quot;)</li>
</ul>
</li>
</ul>
<p>http状态码</p>
<ul>
<li>200：请求成功</li>
<li>405：请求接口类型错误</li>
<li>400：接口参数错误-参数传输的类型错误，需要json，传了url参数</li>
<li>404:接口路径错误或参数错误</li>
<li>500：后台错误，看后台控制台-报错信息</li>
</ul>
<h3 id="post">post</h3>
<p>url参数，且url参数可为空</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/web&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebController</span> <span class="o">{</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/post&#34;</span><span class="o">)</span><span class="c1">//  /web/post
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">post</span><span class="o">(</span><span class="n">Obj</span> <span class="n">obj</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Obj</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">post</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="kc">null</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">post</span><span class="o">?</span><span class="n">name</span><span class="o">=</span><span class="n">kkk</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kkk&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>@RequestBody：将前端提交的json变为java对象</p>
<p>postman中选择body raw  json 用于传输json，也可为空json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/post&#34;</span><span class="o">)</span><span class="c1">//  /web/post
</span><span class="c1"></span><span class="kd">public</span> <span class="n">Result</span> <span class="nf">post</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Obj</span> <span class="n">obj</span><span class="o">){</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
<span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">post</span><span class="o">?</span><span class="n">name</span><span class="o">=</span><span class="n">kkk</span>
<span class="o">{</span>
    <span class="s">&#34;timestamp&#34;</span><span class="o">:</span> <span class="s">&#34;2024-08-21T01:45:06.344+00:00&#34;</span><span class="o">,</span>
    <span class="s">&#34;status&#34;</span><span class="o">:</span> <span class="n">400</span><span class="o">,</span>
    <span class="s">&#34;error&#34;</span><span class="o">:</span> <span class="s">&#34;Bad Request&#34;</span><span class="o">,</span>
    <span class="s">&#34;path&#34;</span><span class="o">:</span> <span class="s">&#34;/web/post&#34;</span>
<span class="o">}</span>
<span class="c1">//参数传输的类型错误，需要json，传了url参数
</span><span class="c1"></span><span class="n">body</span> <span class="n">raw</span> <span class="n">json</span>
<span class="o">{</span>
    <span class="s">&#34;name&#34;</span><span class="o">:</span><span class="s">&#34;kkk&#34;</span>
<span class="o">}</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kkk&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="delete">delete</h3>
<p>可以传输url id，也可以传json&ndash;可用于批量删除</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">&#34;/delete/{id}&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">delete</span><span class="o">/</span><span class="n">1</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="n">1</span>
<span class="o">}</span>

<span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">&#34;/delete&#34;</span><span class="o">)</span><span class="c1">//  
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Obj</span> <span class="n">obj</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
    <span class="o">}</span>
<span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">delete</span>
<span class="o">{</span>
    <span class="s">&#34;name&#34;</span><span class="o">:</span><span class="s">&#34;kkk&#34;</span>
<span class="o">}</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kkk&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">&#34;/delete&#34;</span><span class="o">)</span><span class="c1">//
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">ids</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">[</span><span class="n">1</span><span class="o">,</span><span class="n">2</span><span class="o">,</span><span class="n">3</span><span class="o">,</span><span class="n">4</span><span class="o">,</span><span class="n">5</span><span class="o">]</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">[</span>
        <span class="n">1</span><span class="o">,</span>
        <span class="n">2</span><span class="o">,</span>
        <span class="n">3</span><span class="o">,</span>
        <span class="n">4</span><span class="o">,</span>
        <span class="n">5</span>
    <span class="o">]</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="mybatis">mybatis</h2>
<p>数据库test2024</p>
<p>id 主键 自增  右键设计表添加索引保证username唯一性</p>
<p><img src="/images/2024/61.png" alt=""></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="k">user</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;用户名&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">password</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;密码&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;姓名&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">phone</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;电话&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;邮箱&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">address</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;地址&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="o">`</span><span class="n">avatar</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;头像&#39;</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span><span class="w">
</span><span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">BTREE</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">8</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">COMMENT</span><span class="o">=</span><span class="s1">&#39;用户表&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>application.yml</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">server</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9090</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># mysql</span><span class="w">
</span><span class="w"></span><span class="nt">spring</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l">com.mysql.cj.jdbc.Driver</span><span class="w">
</span><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">jdbc:mysql://localhost:3306/test2024?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2b8</span><span class="w">
</span><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="m">123456</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>entity-user</p>
<p>编译之后，maven-springboot-lifecycle-compile</p>
<p>可以在target/classes/com/example/springboot/entity中看到getset方法已经有了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">passward</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">phone</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">avatar</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller：与前端进行交互，前端调用controller接口，并需要拿数据库信息,即注入service</p>
<p>service：通过mapper操作数据库</p>
<p>mapper:存放mybatis接口/dto</p>
<p>前端数据流程：user-&gt;controller-&gt;service-&gt;mapper-&gt;sql</p>
<h3 id="新增post-insert">新增post-insert</h3>
<p>usermapper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Mapper</span><span class="c1">//注入spring容器
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>

    <span class="c1">//通过数据库语句插入
</span><span class="c1"></span>    <span class="nd">@Insert</span><span class="o">(</span><span class="s">&#34;insert into `user` (username,password,name,phone,email,address,avatar) values &#34;</span> <span class="o">+</span>
            <span class="s">&#34;(#{username},#{password},#{name},#{phone},#{email},#{address},#{avatar})&#34;</span><span class="o">)</span>
    <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">){</span>
        <span class="n">userMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/user&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>

<span class="c1">//    从spring容器中拿到bean
</span><span class="c1"></span>    <span class="nd">@Autowired</span>
    <span class="n">UserService</span> <span class="n">userService</span><span class="o">;</span>

<span class="c1">//    新增用户信息
</span><span class="c1"></span>    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/add&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>
        <span class="c1">//userService.insertUser(user);
</span><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
            <span class="n">userService</span><span class="o">.</span><span class="na">insertUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">DuplicateKeyException</span><span class="o">){</span>
                <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;插入数据库错误&#34;</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;系统错误&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//数据重复插入会报错500，java.sql.SQLIntegrityConstraintViolationException: Duplicate entry &#39;kong&#39; for key &#39;username&#39;
</span><span class="c1"></span><span class="o">{</span>
    <span class="s">&#34;username&#34;</span><span class="o">:</span><span class="s">&#34;kong&#34;</span><span class="o">,</span>
    <span class="s">&#34;password&#34;</span><span class="o">:</span><span class="s">&#34;123&#34;</span><span class="o">,</span>
    <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kong&#34;</span>
<span class="o">}</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;500&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;插入数据库错误&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="kc">null</span>
<span class="o">}</span>
<span class="o">{</span>
    <span class="s">&#34;username&#34;</span><span class="o">:</span><span class="s">&#34;kong1&#34;</span><span class="o">,</span>
    <span class="s">&#34;password&#34;</span><span class="o">:</span><span class="s">&#34;123&#34;</span><span class="o">,</span>
    <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kong1&#34;</span><span class="o">,</span>
    <span class="s">&#34;phone&#34;</span><span class="o">:</span><span class="s">&#34;123456&#34;</span><span class="o">,</span>
    <span class="s">&#34;email&#34;</span><span class="o">:</span><span class="s">&#34;k@123.com&#34;</span><span class="o">,</span>
    <span class="s">&#34;address&#34;</span><span class="o">:</span><span class="s">&#34;江苏徐州&#34;</span><span class="o">,</span>
    <span class="s">&#34;avatar&#34;</span><span class="o">:</span><span class="s">&#34;123.jpg&#34;</span>
<span class="o">}</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="kc">null</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="更新-put-updata">更新 put-updata</h3>
<p>usermapper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Update</span><span class="o">(</span><span class="s">&#34;update `user` set username = #{username},password = #{password},name = #{name},phone = #{phone},email = #{email},address = #{address},avatar = #{avatar}&#34;</span> <span class="o">+</span>
        <span class="s">&#34;where id=#{id}&#34;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">updateUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">){</span>
    <span class="n">userMapper</span><span class="o">.</span><span class="na">updateUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//    修改用户信息
</span><span class="c1"></span>    <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">&#34;update&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">update</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>
        <span class="n">userService</span><span class="o">.</span><span class="na">updateUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="err">localhost:</span><span class="mi">9090</span><span class="err">/user/update</span>

<span class="p">{</span>
    <span class="nt">&#34;id&#34;</span><span class="p">:</span><span class="s2">&#34;7&#34;</span><span class="p">,</span>
    <span class="nt">&#34;username&#34;</span><span class="p">:</span><span class="s2">&#34;kong1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;password&#34;</span><span class="p">:</span><span class="s2">&#34;123&#34;</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;phone&#34;</span><span class="p">:</span><span class="s2">&#34;123456&#34;</span><span class="p">,</span>
    <span class="nt">&#34;email&#34;</span><span class="p">:</span><span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
    <span class="nt">&#34;address&#34;</span><span class="p">:</span><span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
    <span class="nt">&#34;avatar&#34;</span><span class="p">:</span><span class="s2">&#34;123456.jpg&#34;</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;200&#34;</span><span class="p">,</span>
    <span class="nt">&#34;msg&#34;</span><span class="p">:</span> <span class="s2">&#34;请求成功&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="删除-delete">删除 delete</h3>
<p>单个删除</p>
<p>usermapper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Delete</span><span class="o">(</span><span class="s">&#34;delete from `user` where id=#{id}&#34;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
    <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">&#34;delete/{id}&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
    <span class="n">userService</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>批量删除-传入数组，循环删除</p>
<p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">batchDeleteUser</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Integer</span> <span class="n">id</span> <span class="o">:</span> <span class="n">ids</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//    批量删除
</span><span class="c1"></span><span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">&#34;delete/batch&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">batchDelete</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">userService</span><span class="o">.</span><span class="na">batchDeleteUser</span><span class="o">(</span><span class="n">ids</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="p">{</span>
    <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;200&#34;</span><span class="p">,</span>
    <span class="nt">&#34;msg&#34;</span><span class="p">:</span> <span class="s2">&#34;请求成功&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="查询get-select">查询：get-select</h3>
<h4 id="排序查询">排序查询</h4>
<p>倒序 最新插入数据在最前面</p>
<p>usermapper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` order by id desc &#34;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectAll</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usercontroller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//    查询全部用户信息
</span><span class="c1"></span><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/selectAll&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">selectAll</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userList</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">selectAll</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">userList</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="err">localhost:</span><span class="mi">9090</span><span class="err">/user/selectAll</span>

<span class="p">{</span>
    <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;200&#34;</span><span class="p">,</span>
    <span class="nt">&#34;msg&#34;</span><span class="p">:</span> <span class="s2">&#34;请求成功&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong1&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong1&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="s2">&#34;123456&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;123456.jpg&#34;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong2&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong2&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="s2">&#34;123456&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;123456.jpg&#34;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong3&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong3&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="s2">&#34;123456&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;123.jpg&#34;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong4&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong4&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="s2">&#34;123456&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;123.jpg&#34;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
            <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;kong5&#34;</span><span class="p">,</span>
            <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;123&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;kong5&#34;</span><span class="p">,</span>
            <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="s2">&#34;123456&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;k@123.com&#34;</span><span class="p">,</span>
            <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;江苏徐州&#34;</span><span class="p">,</span>
            <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;123.jpg&#34;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="条件查询">条件查询</h4>
<p>通过id查询</p>
<p>若通过name查询，会报错500，因为查询结果为多个，需要返回多个对象，但是返回类型为user对象，则会报错。应该修改为List &lt; User&gt;类型。如果不确定查询结果有几个，则可以统一使用list</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` where id =#{id} order by id desc&#34;</span><span class="o">)</span>
    <span class="n">User</span> <span class="nf">selectById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">User</span> <span class="nf">selectById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
</span><span class="cm">     * 查询单个用户信息
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/selectById/{id}&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">selectAll</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">selectById</span><span class="o">/</span><span class="n">13</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">13</span><span class="o">,</span>
        <span class="s">&#34;username&#34;</span><span class="o">:</span> <span class="s">&#34;kong5&#34;</span><span class="o">,</span>
        <span class="s">&#34;password&#34;</span><span class="o">:</span> <span class="s">&#34;123&#34;</span><span class="o">,</span>
        <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kong5&#34;</span><span class="o">,</span>
        <span class="s">&#34;phone&#34;</span><span class="o">:</span> <span class="s">&#34;123456&#34;</span><span class="o">,</span>
        <span class="s">&#34;email&#34;</span><span class="o">:</span> <span class="s">&#34;k@123.com&#34;</span><span class="o">,</span>
        <span class="s">&#34;address&#34;</span><span class="o">:</span> <span class="s">&#34;江苏徐州&#34;</span><span class="o">,</span>
        <span class="s">&#34;avatar&#34;</span><span class="o">:</span> <span class="s">&#34;123.jpg&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>多条件查询</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` where username =#{username} and name =#{name} order by id desc&#34;</span><span class="o">)</span>
<span class="n">User</span> <span class="nf">selectByMore</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>多条件全模糊查询-不确定查询结果有几个用list</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` where username like  concat(&#39;%&#39;,#{username},&#39;%&#39;) and name like concat(&#39;%&#39;,#{name},&#39;%&#39;) order by id desc&#34;</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectByFuzzy</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectByFuzzy</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByFuzzy</span><span class="o">(</span><span class="n">username</span><span class="o">,</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
</span><span class="cm">     * 多条件模糊查询用户信息
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/selectByFuzzy&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">selectByFuzzy</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userList</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">selectByFuzzy</span><span class="o">(</span><span class="n">username</span><span class="o">,</span><span class="n">name</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">userList</span><span class="o">);</span>
    <span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">selectByFuzzy</span><span class="o">?</span><span class="n">username</span><span class="o">=</span><span class="n">kong</span><span class="o">&amp;</span><span class="n">name</span><span class="o">=</span><span class="n">kong</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">[</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">13</span><span class="o">,</span>
            <span class="s">&#34;username&#34;</span><span class="o">:</span> <span class="s">&#34;kong5&#34;</span><span class="o">,</span>
            <span class="s">&#34;password&#34;</span><span class="o">:</span> <span class="s">&#34;123&#34;</span><span class="o">,</span>
            <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kong5&#34;</span><span class="o">,</span>

        <span class="o">},</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">12</span><span class="o">,</span>
            <span class="s">&#34;username&#34;</span><span class="o">:</span> <span class="s">&#34;kong4&#34;</span><span class="o">,</span>
            <span class="s">&#34;password&#34;</span><span class="o">:</span> <span class="s">&#34;123&#34;</span><span class="o">,</span>
            <span class="s">&#34;name&#34;</span><span class="o">:</span> <span class="s">&#34;kong4&#34;</span><span class="o">,</span>

        <span class="o">},</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">11</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">8</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">7</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="o">{</span>
            <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">2</span><span class="o">,</span>
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>多条件分页模糊查询</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">LIMIT</span><span class="w"> </span><span class="p">[</span><span class="err">位置偏移量</span><span class="p">],</span><span class="w"> </span><span class="err">行数</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">位置偏移量：可选参数，位置偏移量，不写默认是</span><span class="mi">0</span><span class="err">，代表不偏移；</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">行数：指示返回的记录条数。</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">分页显示公式：（当前页数</span><span class="o">-</span><span class="mi">1</span><span class="err">）</span><span class="o">*</span><span class="err">每页条数，每页条数</span><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">table</span><span class="w">
</span><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="p">(</span><span class="n">PageNo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">PageSize</span><span class="p">,</span><span class="n">PageSize</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` where username like  concat(&#39;%&#39;,#{username},&#39;%&#39;) and name like concat(&#39;%&#39;,#{name},&#39;%&#39;) &#34;</span> <span class="o">+</span>
            <span class="s">&#34;order by id desc limit #{pageNum},#{pageSize}&#34;</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectByPage</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span>
            <span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;pageNum&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">pageNum</span><span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">);</span>

	<span class="c1">//总的数据量
</span><span class="c1"></span>    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select count(id) from `user` where username like  concat(&#39;%&#39;,#{username},&#39;%&#39;) and name like concat(&#39;%&#39;,#{name},&#39;%&#39;) &#34;</span> <span class="o">+</span>
            <span class="s">&#34;order by id desc &#34;</span><span class="o">)</span>
    <span class="n">Integer</span> <span class="nf">selectCountByPage</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>


    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">selectByPage</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">pageNum</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">pageNum</span> <span class="o">=(</span><span class="n">pageNum</span><span class="o">-</span><span class="n">1</span><span class="o">)*</span><span class="n">pageSize</span><span class="o">;</span>

        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span><span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userList</span> <span class="o">=</span><span class="n">userMapper</span><span class="o">.</span><span class="na">selectByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">pageNum</span><span class="o">,</span><span class="n">pageSize</span><span class="o">);</span>
        <span class="n">Integer</span> <span class="n">total</span> <span class="o">=</span><span class="n">userMapper</span><span class="o">.</span><span class="na">selectCountByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span><span class="n">name</span><span class="o">);</span>
        <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;list&#34;</span><span class="o">,</span><span class="n">userList</span><span class="o">);</span>
        <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;total&#34;</span><span class="o">,</span><span class="n">total</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>

 <span class="cm">/**
</span><span class="cm">     * 多条件模糊分页查询用户信息
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/selectByPage&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">selectByPage</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span>
                               <span class="nd">@RequestParam</span> <span class="n">Integer</span> <span class="n">pageNum</span><span class="o">,</span><span class="nd">@RequestParam</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">pageMap</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">selectByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">pageNum</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">pageMap</span><span class="o">);</span>
    <span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">selectByPage</span><span class="o">?</span><span class="n">username</span><span class="o">=</span><span class="n">kong</span><span class="o">&amp;</span><span class="n">name</span><span class="o">=</span><span class="n">kong</span><span class="o">&amp;</span><span class="n">pageNum</span><span class="o">=</span><span class="n">1</span><span class="o">&amp;</span><span class="n">pageSize</span><span class="o">=</span><span class="n">5</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;total&#34;</span><span class="o">:</span> <span class="n">6</span><span class="o">,</span>
        <span class="s">&#34;list&#34;</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">13</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">12</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">11</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">8</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">7</span><span class="o">,</span>
            <span class="o">}</span>
        <span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="hashmap">hashmap</h4>
<blockquote>
<p>后面controller返回的数据还是实体类对象 result对象类型, Spring Boot会利用配置的消息转换器（Message Converters）来将这些对象转换成JSON格式的字符串，然后发送给客户端。默认情况下，Spring Boot会使用Jackson库来执行这种转换。通过**<code>@RestController</code>**注解实现。</p>
<p>同时controller接收前端数据的时候会通过<code>@RequestBody</code>  User user将前端json转为实体类user</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span><span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;kong&#34;</span><span class="o">);</span>
    <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;total&#34;</span><span class="o">,</span><span class="n">1</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="n">Result</span> <span class="n">data</span> <span class="o">=</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">+</span><span class="s">&#34;  &#34;</span><span class="o">+</span><span class="n">data</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getData</span><span class="o">()+</span><span class="s">&#34;  &#34;</span><span class="o">+</span><span class="n">data</span><span class="o">.</span><span class="na">getData</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
   
<span class="o">}</span>

<span class="o">{</span><span class="n">total</span><span class="o">=</span><span class="n">1</span><span class="o">,</span> <span class="n">name</span><span class="o">=</span><span class="n">kong</span><span class="o">}</span>
<span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">HashMap</span>
<span class="nf">Result</span><span class="o">(</span><span class="n">code</span><span class="o">=</span><span class="n">200</span><span class="o">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">请求成功</span><span class="o">,</span> <span class="n">data</span><span class="o">={</span><span class="n">total</span><span class="o">=</span><span class="n">1</span><span class="o">,</span> <span class="n">name</span><span class="o">=</span><span class="n">kong</span><span class="o">})</span>  <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">common</span><span class="o">.</span><span class="na">Result</span>
<span class="o">{</span><span class="n">total</span><span class="o">=</span><span class="n">1</span><span class="o">,</span> <span class="n">name</span><span class="o">=</span><span class="n">kong</span><span class="o">}</span>  <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">HashMap</span>

</code></pre></td></tr></table>
</div>
</div><p>进一步封装page对象，作为分页查询的返回对象</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">page</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//    总数据量
</span><span class="c1"></span>    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">total</span><span class="o">;</span>
    <span class="c1">//    每页的数据
</span><span class="c1"></span>    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>

<span class="o">}</span>

    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectByPage</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">pageNum</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">pageNum</span> <span class="o">=</span> <span class="o">(</span><span class="n">pageNum</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">pageSize</span><span class="o">;</span>
        <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">&lt;&gt;();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userList</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">pageNum</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
        <span class="n">Integer</span> <span class="n">total</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectCountByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
        <span class="n">page</span><span class="o">.</span><span class="na">setList</span><span class="o">(</span><span class="n">userList</span><span class="o">);</span>
        <span class="n">page</span><span class="o">.</span><span class="na">setTotal</span><span class="o">(</span><span class="n">total</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/selectByPage&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">selectByPage</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span><span class="nd">@RequestParam</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span>
                               <span class="nd">@RequestParam</span> <span class="n">Integer</span> <span class="n">pageNum</span><span class="o">,</span><span class="nd">@RequestParam</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="n">page</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">selectByPage</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">pageNum</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">page</span><span class="o">);</span>
    <span class="o">}</span>
<span class="nl">
</span><span class="nl">localhost:</span><span class="n">9090</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">selectByPage</span><span class="o">?</span><span class="n">username</span><span class="o">=</span><span class="n">kong</span><span class="o">&amp;</span><span class="n">name</span><span class="o">=</span><span class="n">kong</span><span class="o">&amp;</span><span class="n">pageNum</span><span class="o">=</span><span class="n">1</span><span class="o">&amp;</span><span class="n">pageSize</span><span class="o">=</span><span class="n">3</span>
<span class="o">{</span>
    <span class="s">&#34;code&#34;</span><span class="o">:</span> <span class="s">&#34;200&#34;</span><span class="o">,</span>
    <span class="s">&#34;msg&#34;</span><span class="o">:</span> <span class="s">&#34;请求成功&#34;</span><span class="o">,</span>
    <span class="s">&#34;data&#34;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&#34;total&#34;</span><span class="o">:</span> <span class="n">6</span><span class="o">,</span>
        <span class="s">&#34;list&#34;</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">13</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">12</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">&#34;id&#34;</span><span class="o">:</span> <span class="n">11</span><span class="o">,</span>
            <span class="o">}</span>
        <span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="前后端交互">前后端交互</h2>
<p>axios</p>
<p>安装：</p>
<p>npm i axios -S</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue">
		<span class="p">&lt;</span><span class="nt">el-card</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width:50%&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">slot</span><span class="o">=</span><span class="s">&#34;header&#34;</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;clearfix&#34;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">渲染用户数据</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">el-table</span> <span class="nt">:data</span><span class="s">=&#34;users&#34;</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">el-table-column</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;ID&#34;</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;id&#34;</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-table-column&gt;</span>
                  <span class="p">&lt;</span><span class="nt">el-table-column</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;用户名&#34;</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-table-column&gt;</span>
                  <span class="p">&lt;</span><span class="nt">el-table-column</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;姓名&#34;</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-table-column&gt;</span>
                  <span class="p">&lt;</span><span class="nt">el-table-column</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;地址&#34;</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;address&#34;</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/el-table-column&gt;</span>
                <span class="o">&lt;</span><span class="err">/el-table&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

         <span class="o">&lt;</span><span class="err">/el-card&gt;</span>
		
<span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;HomeView&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">users</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="c1">//页面加载好再去请求数据,页面加载完后触发
</span><span class="c1"></span>  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:9090/user/selectAll&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span><span class="c1">//后台返回的数据
</span><span class="c1"></span>	  <span class="k">this</span><span class="p">.</span><span class="nx">users</span> <span class="o">=</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span>

    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ERROR</p>
<p>Network Error AxiosError: Network Error    at XMLHttpRequest.handleError (webpack-internal:///./node_modules/axios/lib/adapters/xhr.js:112:14)    at Axios.request (webpack-internal:///./node_modules/axios/lib/core/Axios.js:54:41)</p>
<p><img src="/images/2024/62.png" alt=""></p>
<p>跨域问题：</p>
<p>在controller层添加注解@CrossOrigin</p>
</blockquote>
<p><img src="/images/2024/63.png" alt=""></p>
<p><img src="/images/2024/64.png" alt=""></p>
<h3 id="封装请求工具类">封装请求工具类</h3>
<p>request.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">//前端封装好的http工具
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span><span class="p">;</span>

<span class="c1">//创建一个新的axios对象
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span><span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">baseURL</span><span class="o">:</span><span class="s1">&#39;http://localhost:9090&#39;</span><span class="p">,</span>
    <span class="nx">timeout</span><span class="o">:</span><span class="mi">30000</span>
<span class="p">})</span>

<span class="c1">//定义请求参数 request拦截器 可以自请求发送前对请求做一些处理，比如统一加token，对请求参数统一加密
</span><span class="c1"></span><span class="nx">request</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">config</span> <span class="p">=&gt;{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;application/json;charset=utf-8&#39;</span><span class="p">;</span>
    <span class="c1">//设置请求头
</span><span class="c1"></span>    <span class="c1">// config.headers[&#39;token&#39;]
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">config</span>
<span class="p">},</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;request error: &#39;</span><span class="o">+</span><span class="nx">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">//响应标头 response拦截器 可以在接口响应后统一处理结果
</span><span class="c1"></span><span class="nx">request</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
    <span class="nx">response</span><span class="p">=&gt;{</span>
        <span class="kd">let</span> <span class="nx">res</span><span class="o">=</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="c1">//兼容服务器端返回的字符串数据
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">res</span><span class="o">===</span><span class="s1">&#39;string&#39;</span><span class="p">){</span>
            <span class="nx">res</span><span class="o">=</span><span class="nx">res</span> <span class="o">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">:</span> <span class="nx">res</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;response error: &#39;</span><span class="o">+</span><span class="nx">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">request</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">Request</span> <span class="nx">from</span> <span class="s2">&#34;@/utils/request&#34;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;HomeView&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">users</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="c1">//页面加载好再去请求数据,页面加载完后触发
</span><span class="c1"></span>  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">Request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/selectAll&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">users</span><span class="o">=</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="vue登录注册">vue登录注册</h2>
<p>router-index.js写入路由</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/login&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Login&#39;</span><span class="p">,</span><span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;../views/Login.vue&#39;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>main.js 定义全局变量</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s2">&#34;@/utils/request&#34;</span><span class="p">;</span>
<span class="c1">//定义全局的变量request
</span><span class="c1"></span><span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$request</span><span class="o">=</span><span class="nx">request</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="登录界面">登录界面</h3>
<p>login.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;height: 100vh; display: flex;align-items: center;justify-content: center;background-color: #0f9876&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex; background-color: white;width: 50%;border-radius: 5px;overflow: hidden&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;@/assets/shenli.png&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%;height: 100%&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;display: flex;align-items: center;justify-content: center&#34;</span><span class="p">&gt;</span>
        <span class="c">&lt;!--</span>        <span class="nx">绑定user对象</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-form</span> <span class="nt">:model</span><span class="s">=&#34;user&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 80%&#34;</span> <span class="nt">:rules</span><span class="s">=&#34;rules&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;loginRef&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;font-size: 20px; font-weight: bold;text-align: center;margin-bottom: 20px&#34;</span><span class="p">&gt;</span><span class="nx">欢迎登录后台管理系统</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="c">&lt;!--</span>          <span class="nx">表单</span> <span class="nx">prop表单校验</span><span class="o">--&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-user</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入账号&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.username&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-lock</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">show</span><span class="nt">-password</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入密码&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.password&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="c">&lt;!--</span>          <span class="nx">验证码</span><span class="o">--&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;code&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-circle-check</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入验证码&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.code&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;height: 36px&#34;</span> <span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">valid-code</span> <span class="nt">@update:value</span><span class="s">=&#34;getCode&#34;</span><span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%&#34;</span> <span class="nt">@click</span><span class="s">=&#34;login&#34;</span><span class="p">&gt;</span><span class="na">登</span> <span class="na">录</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-button</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>


          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex&#34;</span><span class="p">&gt;</span>
            <span class="c">&lt;!--</span>          <span class="nx">登录</span> <span class="nx">指到变成小手</span><span class="o">--&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1&#34;</span><span class="p">&gt;</span><span class="nx">还没有账号</span><span class="err">？</span><span class="nx">请</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: #0f9876;cursor: pointer&#34;</span><span class="p">&gt;</span><span class="nx">注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;text-align: right&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: #0f9876;cursor: pointer&#34;</span><span class="p">&gt;</span><span class="nx">忘记密码</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


        <span class="o">&lt;</span><span class="err">/el-form&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">ValidCode</span> <span class="nx">from</span> <span class="s2">&#34;@/conponents/ValidCode&#34;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Login&#34;</span><span class="p">,</span>
  <span class="c1">//引入验证码组件
</span><span class="c1"></span>  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ValidCode</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//自定义 验证码校验
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">validateCode</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;请输入验证码&#39;</span><span class="p">))</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">!=</span><span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;验证码错误&#39;</span><span class="p">))</span>
      <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>


    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">code</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span><span class="c1">//验证码组件传递的code
</span><span class="c1"></span>      <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">code</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="c1">//表单里用户输入的code验证码
</span><span class="c1"></span>      <span class="p">},</span>
      <span class="c1">// 表单提交数据校验
</span><span class="c1"></span>      <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;请输入账号&#39;</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="nx">password</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;请输入密码&#39;</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="c1">//自定义验证方式
</span><span class="c1"></span>        <span class="nx">code</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="nx">validator</span><span class="o">:</span> <span class="nx">validateCode</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span> <span class="p">}</span>
        <span class="p">],</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">getCode</span><span class="p">(</span><span class="nx">code</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="o">=</span><span class="nx">code</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="c1">//变小写 不区分大小写
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="nx">login</span><span class="p">(){</span>
      <span class="c1">//判断表单校验是否成功
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="s1">&#39;loginRef&#39;</span><span class="p">].</span><span class="nx">validate</span><span class="p">((</span><span class="nx">valid</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">//验证通过 对后端接口发起请求，将this.user发给后台
</span><span class="c1"></span>          <span class="k">this</span><span class="p">.</span><span class="nx">$request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span><span class="s1">&#39;200&#39;</span><span class="p">){</span>
                <span class="c1">//跳转页面
</span><span class="c1"></span>              <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s1">&#39;登录成功&#39;</span><span class="p">)</span>
                <span class="c1">//存储用户数据
</span><span class="c1"></span>              <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&#34;user-data&#34;</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
            <span class="p">}</span>

          <span class="p">})</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/2024/67.png" alt=""></p>
<p>退出登录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">el-dropdown-item</span> <span class="nt">@click.native</span><span class="s">=&#34;$router.push(&#39;/login&#39;)&#34;</span><span class="p">&gt;</span><span class="nx">退出登录</span><span class="o">&lt;</span><span class="err">/el-dropdown-item&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="登录接口">登录接口</h3>
<p>WebController-将user数据返回前端</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebController</span> <span class="o">{</span>
    <span class="nd">@Resource</span>
    <span class="n">UserService</span> <span class="n">userService</span><span class="o">;</span>
    
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">hello</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    
        <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/login&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>
        <span class="c1">//数据校验
</span><span class="c1">//        if (user.getUsername()==null||user.getUsername().isEmpty()){
</span><span class="c1">//            return Result.error(&#34;数据输入不合法&#34;);
</span><span class="c1">//        }
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())||</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())){</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;数据输入不合法&#34;</span><span class="o">);</span>
        <span class="o">}</span>
       <span class="n">user</span><span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>加入hutool依赖</p>
<p>国产工具类</p>
<blockquote>
<p>StrUtil.isBlank(a):检测a是否为空</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>cn.hutool<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hutool-all<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.8.18<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//    验证用户账号是否合法
</span><span class="c1"></span><span class="kd">public</span> <span class="n">User</span> <span class="nf">login</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//根据用户名查询数据库的用户信息
</span><span class="c1"></span>    <span class="n">User</span> <span class="n">dbUser</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByUsername</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">dbUser</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//抛出一个自定义的异常
</span><span class="c1"></span>        <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;用户名或密码错误&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">//判断密码是否正确
</span><span class="c1"></span>    <span class="k">if</span> <span class="o">(!</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">dbUser</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;用户名或密码错误&#34;</span><span class="o">);</span>

    <span class="o">}</span>
    <span class="k">return</span> <span class="n">dbUser</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>usermapper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from `user` where username =#{username} order by id desc&#34;</span><span class="o">)</span>
<span class="n">User</span> <span class="nf">selectByUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="抛出自定义异常">抛出自定义异常</h3>
<p>exception</p>
<p>抛出一个自定义的异常，而不是向前端直接返回500，返回的code还是200</p>
<p>表示：本次http请求是成功的，但是业务是错误的</p>
<p><img src="/images/2024/65.png" alt=""></p>
<p><img src="/images/2024/66.png" alt=""></p>
<p>gloablException</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.springboot.exception</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.example.springboot.common.Result</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseBody</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalException</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">ServiceException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span><span class="c1">//将result的java对象转为json
</span><span class="c1">//    自定义异常
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">serviceException</span><span class="o">(</span> <span class="n">ServiceException</span> <span class="n">e</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;500&#34;</span><span class="o">,</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ServiceException</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.springboot.exception</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span><span class="o">{</span>
<span class="c1">//    构造方法
</span><span class="c1"></span>    <span class="kd">public</span> <span class="nf">ServiceException</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="验证码组件">验证码组件</h3>
<p>conponent-ValidCode.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ValidCode disabled-select&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%;height: 100%;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;refreshCode&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">v-for</span><span class="s">=&#34;(item,index) in codeList&#34; :key=&#34;index&#34; :style=&#34;getStyle(item)&#34;</span><span class="p">&gt;{{</span><span class="na">item.code</span><span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;ValidCode&#34;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">(){</span>
    <span class="k">return</span><span class="p">{</span>
      <span class="nx">length</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span>
      <span class="nx">codeList</span><span class="o">:</span><span class="p">[]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">createdCode</span><span class="p">()</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">refreshCode</span><span class="p">(){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">createdCode</span><span class="p">()</span>
    <span class="p">},</span>
    <span class="nx">createdCode</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">len</span> <span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
          <span class="nx">codeList</span><span class="o">=</span><span class="p">[],</span>
          <span class="nx">chars</span><span class="o">=</span><span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#39;</span><span class="p">,</span>
          <span class="nx">charsLen</span><span class="o">=</span><span class="nx">chars</span><span class="p">.</span><span class="nx">length</span>
      <span class="c1">//生成
</span><span class="c1"></span>      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="p">&lt;</span><span class="nt">len</span><span class="err">;</span><span class="na">i</span><span class="err">++)</span><span class="p">{</span>
        <span class="na">let</span> <span class="na">rgb</span><span class="o">=</span><span class="err">[</span><span class="na">Math.round</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">220</span><span class="err">),</span> <span class="na">Math.round</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">240</span><span class="err">),</span><span class="na">Math.round</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">200</span><span class="err">)]</span>
        <span class="na">codeList.push</span><span class="err">(</span><span class="p">{</span>
          <span class="na">code</span><span class="o">:</span> <span class="na">chars.charAt</span><span class="err">(</span><span class="na">Math.floor</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">charsLen</span><span class="err">)),</span>
          <span class="na">color</span><span class="o">:</span> <span class="err">`</span><span class="na">rgb</span><span class="err">($</span><span class="p">{</span><span class="na">rgb</span><span class="p">}</span><span class="err">)`,</span>
          <span class="na">padding</span><span class="o">:</span> <span class="err">`$</span><span class="p">{</span><span class="err">[</span><span class="na">Math.floor</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">10</span><span class="err">)]</span><span class="p">}</span><span class="na">px</span><span class="err">`,</span>
          <span class="na">transform</span><span class="o">:</span> <span class="err">`</span><span class="na">rotate</span><span class="err">($</span><span class="p">{</span><span class="na">Math.floor</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span><span class="na">90</span><span class="err">)</span><span class="nt">-Math</span><span class="na">.floor</span><span class="err">(</span><span class="na">Math.random</span><span class="err">()*</span> <span class="na">90</span><span class="err">)</span><span class="p">}</span><span class="na">deg</span><span class="err">)`</span>
        <span class="p">}</span><span class="err">)</span>
      <span class="p">}</span>
      <span class="err">//</span><span class="na">指向</span>
      <span class="na">this.codeList</span><span class="err">=</span><span class="na">codeList</span>
      <span class="err">//</span><span class="na">通过update</span><span class="o">:</span><span class="na">value事件</span><span class="err">，</span><span class="na">将当前数据派发出去</span>
      <span class="na">this.</span><span class="err">$</span><span class="na">emit</span><span class="err">(&#39;</span><span class="na">update</span><span class="o">:</span><span class="na">value</span><span class="err">&#39;,</span><span class="na">codeList.map</span><span class="err">(</span><span class="na">item</span><span class="o">=</span><span class="p">&gt;</span><span class="nx">item</span><span class="p">.</span><span class="nx">code</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
    <span class="p">},</span>
    <span class="nx">getStyle</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
      <span class="k">return</span> <span class="sb">`color:</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">color</span><span class="si">}</span><span class="sb">; font-size:</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">fontSize</span><span class="si">}</span><span class="sb">; padding:</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">padding</span><span class="si">}</span><span class="sb">;transform:</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">transform</span><span class="si">}</span><span class="sb">`</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">ValidCode</span><span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
  <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
  <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nx">ValidCode</span> <span class="nx">span</span><span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">inline</span><span class="o">-</span><span class="nx">block</span><span class="p">;</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">18</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>引入并使用组件,并在登录的时候校验验证码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue">      	  <span class="c">&lt;!--</span><span class="nx">验证码组件</span><span class="o">--&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;code&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-circle-check</span><span class="err">&#34;</span> 
                        <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.code&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;height: 36px&#34;</span> <span class="p">&gt;</span>
                <span class="c">&lt;!--</span><span class="err">@</span><span class="nx">update</span><span class="o">:</span><span class="nx">value事件得到数据</span><span class="o">--&gt;</span>
                <span class="p">&lt;</span><span class="nt">valid-code</span> <span class="nt">@update:value</span><span class="s">=&#34;getCode&#34;</span><span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>

		<span class="p">&lt;</span><span class="nt">el-form-item</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%&#34;</span> 
                       <span class="nt">@click</span><span class="s">=&#34;login&#34;</span><span class="p">&gt;</span><span class="na">登</span> <span class="na">录</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-button</span><span class="p">&gt;</span>
        <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Login&#34;</span><span class="p">,</span>
  <span class="c1">//引入验证码组件
</span><span class="c1"></span>  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ValidCode</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">return</span> <span class="p">{</span>
      <span class="nx">code</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span><span class="c1">//验证码组件传递过来的code
</span><span class="c1"></span>      <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">code</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="c1">//表单里用户输入的验证码code
</span><span class="c1"></span>      <span class="p">},</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">getCode</span><span class="p">(</span><span class="nx">code</span><span class="p">){</span>
	  <span class="c1">//获取验证码数据
</span><span class="c1"></span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="o">=</span><span class="nx">code</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="c1">//变小写 不区分大小写
</span><span class="c1"></span>  <span class="p">},</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="跨域问题">跨域问题</h3>
<blockquote>
<p>遇到了跨域错误</p>
<p>login:1 Access to XMLHttpRequest at &lsquo;http://localhost:9090/login&rsquo; from origin &lsquo;http://localhost:7000&rsquo; has been blocked by CORS policy: Response to preflight request doesn&rsquo;t pass access control check: No &lsquo;Access-Control-Allow-Origin&rsquo; header is present on the requested resource.</p>
</blockquote>
<p>springboot解决跨域问题 -<a href="https://blog.csdn.net/xqnode/article/details/120947462?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522172463591616800180644641%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=172463591616800180644641&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~top_positive~default-1-120947462-null-null.nonecase&amp;utm_term=%E8%B7%A8%E5%9F%9F&amp;spm=1018.2226.3001.4450">blog</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.cors.CorsConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.cors.UrlBasedCorsConfigurationSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.filter.CorsFilter</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CorsConfig</span> <span class="o">{</span>

    <span class="c1">// 当前跨域请求最大有效时长。这里默认1天
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">MAX_AGE</span> <span class="o">=</span> <span class="n">24</span> <span class="o">*</span> <span class="n">60</span> <span class="o">*</span> <span class="n">60</span><span class="o">;</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">CorsFilter</span> <span class="nf">corsFilter</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">UrlBasedCorsConfigurationSource</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UrlBasedCorsConfigurationSource</span><span class="o">();</span>
        <span class="n">CorsConfiguration</span> <span class="n">corsConfiguration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CorsConfiguration</span><span class="o">();</span>
        <span class="n">corsConfiguration</span><span class="o">.</span><span class="na">addAllowedOrigin</span><span class="o">(</span><span class="s">&#34;*&#34;</span><span class="o">);</span> <span class="c1">// 1 设置访问源地址
</span><span class="c1"></span>        <span class="n">corsConfiguration</span><span class="o">.</span><span class="na">addAllowedHeader</span><span class="o">(</span><span class="s">&#34;*&#34;</span><span class="o">);</span> <span class="c1">// 2 设置访问源请求头
</span><span class="c1"></span>        <span class="n">corsConfiguration</span><span class="o">.</span><span class="na">addAllowedMethod</span><span class="o">(</span><span class="s">&#34;*&#34;</span><span class="o">);</span> <span class="c1">// 3 设置访问源请求方法
</span><span class="c1"></span>        <span class="n">corsConfiguration</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="n">MAX_AGE</span><span class="o">);</span>
        <span class="n">source</span><span class="o">.</span><span class="na">registerCorsConfiguration</span><span class="o">(</span><span class="s">&#34;/**&#34;</span><span class="o">,</span> <span class="n">corsConfiguration</span><span class="o">);</span> <span class="c1">// 4 对接口配置跨域设置
</span><span class="c1"></span>        <span class="k">return</span> <span class="k">new</span> <span class="n">CorsFilter</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>前端登录逻辑：</p>
<p>当后台返回的code是200的时候，表示验证通过</p>
<p>存储用户信息，然后跳转主页</p>
<p>后端登录逻辑：</p>
<p>验证用户名密码不为空，通过用户名查询数据库，验证用户是否存在</p>
<p>密码不匹配，说明输入错误</p>
<p>验证通过，返回200</p>
</blockquote>
<h3 id="注册界面">注册界面</h3>
<p>register.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;height: 100vh; display: flex;align-items: center;justify-content: center;background-color: #0f6898&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex; background-color: white;width: 50%;border-radius: 5px;overflow: hidden&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;@/assets/leishen.png&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%;height: 100%&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1;display: flex;align-items: center;justify-content: center&#34;</span><span class="p">&gt;</span>
        <span class="c">&lt;!--</span>        <span class="nx">绑定user对象</span><span class="o">--&gt;</span>
        <span class="p">&lt;</span><span class="nt">el-form</span> <span class="nt">:model</span><span class="s">=&#34;user&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 80%&#34;</span> <span class="nt">:rules</span><span class="s">=&#34;rules&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;registerRef&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;font-size: 20px; font-weight: bold;text-align: center;margin-bottom: 20px&#34;</span><span class="p">&gt;</span><span class="nx">欢迎注册</span> <span class="nx">后台管理系统</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="c">&lt;!--</span>          <span class="nx">表单</span> <span class="nx">prop表单校验</span><span class="o">--&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-user</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入账号&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.username&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-lock</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">show</span><span class="nt">-password</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入密码&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.password&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span> <span class="na">prop</span><span class="o">=</span><span class="s">&#34;confirmPass&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-input</span> <span class="na">prefix</span><span class="nt">-icon</span><span class="err">=&#34;</span><span class="na">el</span><span class="nt">-icon-lock</span><span class="err">&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;medium&#34;</span> <span class="na">show</span><span class="nt">-password</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请确认密码&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;user.confirmPass&#34;</span><span class="p">&gt;</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-input</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
          <span class="p">&lt;</span><span class="nt">el-form-item</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;success&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;width: 100%&#34;</span> <span class="nt">@click</span><span class="s">=&#34;register&#34;</span><span class="p">&gt;</span><span class="na">注</span> <span class="na">册</span><span class="err">&lt;/</span><span class="na">el</span><span class="nt">-button</span><span class="p">&gt;</span>
          <span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>


          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display: flex&#34;</span><span class="p">&gt;</span>
            <span class="c">&lt;!--</span>          <span class="nx">登录</span> <span class="nx">指到变成小手</span><span class="o">--&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1&#34;</span><span class="p">&gt;</span><span class="nx">已经有账号了</span><span class="err">？</span><span class="nx">请</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: #5934cb;cursor: pointer&#34;</span> <span class="nt">@click</span><span class="s">=&#34;$router.push(&#39;/login&#39;)&#34;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="nx">登录</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


        <span class="o">&lt;</span><span class="err">/el-form&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>


<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Register&#34;</span><span class="p">,</span>

  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//自定义校验
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">validatePassword</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">confirmPass</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">confirmPass</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;请确认密码&#39;</span><span class="p">))</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">confirmPass</span><span class="o">!=</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;两次输入密码不一致&#39;</span><span class="p">))</span>
      <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">confirmPass</span><span class="o">:</span><span class="s1">&#39;&#39;</span>
      <span class="p">},</span>
      <span class="c1">//表单提交数据校验规则
</span><span class="c1"></span>      <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;请输入账号&#39;</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="nx">password</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;请输入密码&#39;</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="nx">confirmPass</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="nx">validator</span><span class="o">:</span> <span class="nx">validatePassword</span><span class="p">,</span> <span class="nx">trigger</span><span class="o">:</span> <span class="s1">&#39;blur&#39;</span> <span class="p">}</span>
        <span class="p">],</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">register</span><span class="p">(){</span>
      <span class="c1">//判断表单校验是否成功
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="s1">&#39;registerRef&#39;</span><span class="p">].</span><span class="nx">validate</span><span class="p">((</span><span class="nx">valid</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// 验证通过 对后端接口发起请求
</span><span class="c1"></span>          <span class="k">this</span><span class="p">.</span><span class="nx">$request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/register&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span><span class="s1">&#39;200&#39;</span><span class="p">){</span>
              <span class="c1">//跳转页面
</span><span class="c1"></span>              <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s1">&#39;注册成功&#39;</span><span class="p">)</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
            <span class="p">}</span>

          <span class="p">})</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/2024/68.png" alt=""></p>
<p>router-index.js写入路由</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/register&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Register&#39;</span><span class="p">,</span><span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;../views/Register.vue&#39;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>页面跳转</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;flex: 1&#34;</span><span class="p">&gt;</span><span class="nx">还没有账号</span><span class="err">？</span><span class="nx">请</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: #0f9876;cursor: pointer&#34;</span> <span class="nt">@click</span><span class="s">=&#34;$router.push(&#39;/register&#39;)&#34;</span><span class="p">&gt;</span><span class="na">注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>注册接口</p>
<p>controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/register&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">register</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())||</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;数据输入不合法&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">().</span><span class="na">length</span><span class="o">()&gt;</span><span class="n">10</span><span class="o">||</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">length</span><span class="o">()&gt;</span><span class="n">20</span> <span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;数据输入不合法&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">user</span><span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>service</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="n">User</span> <span class="nf">register</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">User</span> <span class="n">dbUser</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByUsername</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
        <span class="c1">//用户已存在
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">dbUser</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//抛出一个自定义的异常，而不是向前端直接返回500，返回的code还是200
</span><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;用户名已存在&#34;</span><span class="o">);</span>
        <span class="o">}</span>
<span class="c1">//        user.setName(&#34;dog-&#34;+ RandomUtil.randomNumbers(4));
</span><span class="c1"></span>        <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
        <span class="n">userMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">user</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="jwt-token实现权限验证">JWT token实现权限验证</h2>
<p>JWT：Json Web Token。JWT 是JSON风格轻量级的授权和身份认证规范，可实现无状态、分布式的Web应用授权。是基于token的一种授权认证方式。就是一个字符串，经过加密处理与校验处理的字符串。JWT可以使用HMAC算法或者是RSA的公私秘钥对进行签名。</p>
<p>pom.xml添加依赖</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!--jwt依赖--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.auth0<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>java-jwt<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.3.0<span class="nt">&lt;/version&gt;</span>
<span class="err">&lt;</span>/dependency
</code></pre></td></tr></table>
</div>
</div><p>修改自定义异常</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Getter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">code</span><span class="o">;</span>

<span class="c1">//    构造方法
</span><span class="c1"></span>    <span class="kd">public</span> <span class="nf">ServiceException</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">code</span><span class="o">=</span> <span class="s">&#34;500&#34;</span><span class="o">;</span><span class="c1">//默认的code
</span><span class="c1"></span>    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">ServiceException</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">,</span><span class="n">String</span> <span class="n">msg</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">code</span><span class="o">=</span><span class="n">code</span><span class="o">;</span><span class="c1">//自定义
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalException</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">ServiceException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span><span class="c1">//将result的java对象转为json
</span><span class="c1">//    自定义异常
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">serviceException</span><span class="o">(</span> <span class="n">ServiceException</span> <span class="n">e</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="自定义拦截器">自定义拦截器</h3>
<p>JwtInterceptor</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>

    <span class="nd">@Resource</span>
    <span class="kd">private</span> <span class="n">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span><span class="n">Object</span> <span class="n">handle</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//header里面传来的参数
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">token</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">&#34;token&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">token</span><span class="o">)){</span>
            <span class="c1">//url参数  ?token=xxx
</span><span class="c1"></span>            <span class="n">token</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;token&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//执行认证 没有token抛出异常
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">token</span><span class="o">)){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//获取token中的userid
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">userId</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">userId</span><span class="o">=</span> <span class="n">JWT</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getAudience</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">JWTDecodeException</span> <span class="n">j</span><span class="o">){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//根据token中的userid查询数据库,字符串转为数字
</span><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">userId</span><span class="o">));</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span><span class="kc">null</span><span class="o">){</span>
            <span class="c1">//数据库中查不到数据
</span><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//通过用户密码加密之后生成一个验证器
</span><span class="c1"></span>        <span class="n">JWTVerifier</span> <span class="n">jwtVerifier</span> <span class="o">=</span> <span class="n">JWT</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="na">HMAC256</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())).</span><span class="na">build</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">jwtVerifier</span><span class="o">.</span><span class="na">verify</span><span class="o">(</span><span class="n">token</span><span class="o">);</span><span class="c1">//验证token
</span><span class="c1"></span>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JWTVerificationException</span> <span class="n">e</span><span class="o">){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>401：权限错误</p>
</blockquote>
<h3 id="拦截器配置">拦截器配置</h3>
<p>InterceptorConfig</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InterceptorConfig</span> <span class="kd">extends</span> <span class="n">WebMvcConfigurationSupport</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">addInterceptors</span><span class="o">(</span><span class="n">InterceptorRegistry</span> <span class="n">registry</span><span class="o">){</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="n">jwtInterceptor</span><span class="o">())</span><span class="c1">//配置jwt的拦截器规则
</span><span class="c1"></span>                <span class="o">.</span><span class="na">addPathPatterns</span><span class="o">(</span><span class="s">&#34;/**&#34;</span><span class="o">);</span><span class="c1">//拦截所有的请求路径
</span><span class="c1"></span>        <span class="kd">super</span><span class="o">.</span><span class="na">addInterceptors</span><span class="o">(</span><span class="n">registry</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">JwtInterceptor</span> <span class="nf">jwtInterceptor</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JwtInterceptor</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="token工具类">token工具类</h3>
<p>TokenUtils</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TokenUtils</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">UserMapper</span> <span class="n">staticUserMapper</span><span class="o">;</span>

    <span class="nd">@Resource</span>
    <span class="n">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>

    <span class="nd">@PostConstruct</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserService</span><span class="o">(){</span>
        <span class="n">staticUserMapper</span><span class="o">=</span><span class="n">userMapper</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
</span><span class="cm">     * 生成token
</span><span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">String</span> <span class="n">userId</span><span class="o">,</span><span class="n">String</span> <span class="n">sign</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">JWT</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">withAudience</span><span class="o">(</span><span class="n">userId</span><span class="o">)</span><span class="c1">//将userid保存到token里面，作为荷载
</span><span class="c1"></span>                <span class="o">.</span><span class="na">withExpiresAt</span><span class="o">(</span><span class="n">DateUtil</span><span class="o">.</span><span class="na">offsetHour</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(),</span><span class="n">2</span><span class="o">))</span><span class="c1">//2小时后token过期
</span><span class="c1"></span>                <span class="o">.</span><span class="na">sign</span><span class="o">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="na">HMAC256</span><span class="o">(</span><span class="n">sign</span><span class="o">));</span><span class="c1">//以password作为token的密钥
</span><span class="c1"></span>    <span class="o">}</span>
    <span class="cm">/**
</span><span class="cm">     * 获取当前登录的用户对象
</span><span class="cm">     * 前端请求带了token，就可以知道当前用户是谁在请求
</span><span class="cm">     * 解析token，拿到当前user信息
</span><span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">getCurrentUser</span><span class="o">(){</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">HttpServletRequest</span> <span class="n">request</span> <span class="o">=((</span><span class="n">ServletRequestAttributes</span><span class="o">)</span> <span class="n">RequestContextHolder</span><span class="o">.</span><span class="na">getRequestAttributes</span><span class="o">()).</span><span class="na">getRequest</span><span class="o">();</span>
            <span class="n">String</span> <span class="n">token</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">&#34;token&#34;</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">token</span><span class="o">)){</span>
                <span class="n">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">JWT</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getAudience</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">staticUserMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">userId</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>


<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="生成token">生成token</h3>
<p>在user实体类中添加token对象</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">String</span> <span class="n">token</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><p>userservice中生成token，并传进user&mdash;验证user合法之后</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="c1">//    验证用户账号是否合法   
</span><span class="c1"></span>	<span class="kd">public</span> <span class="n">User</span> <span class="nf">login</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//根据用户名查询数据库的用户信息
</span><span class="c1"></span>        <span class="n">User</span> <span class="n">dbUser</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByUsername</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">dbUser</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//抛出一个自定义的异常，而不是向前端直接返回500，返回的code还是200
</span><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;用户名或密码错误&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">dbUser</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;用户名或密码错误&#34;</span><span class="o">);</span>

        <span class="o">}</span>
        <span class="c1">//生成token userid放进token，password验证token
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">TokenUtils</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span>
        <span class="n">dbUser</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">dbUser</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>此时登录会报错：</strong></p>
<p><strong>{&ldquo;code&rdquo;:&ldquo;401&rdquo;,&ldquo;msg&rdquo;:&ldquo;请登录&rdquo;,&ldquo;data&rdquo;:null}</strong></p>
<p>说明登录接口被拦截(addInterceptors拦截所有的请求路径)</p>
<ul>
<li>解除login的拦截。此时login请求成功，seletall请求失败，login中拿到了token</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">addInterceptors</span><span class="o">(</span><span class="n">InterceptorRegistry</span> <span class="n">registry</span><span class="o">){</span>
    <span class="n">registry</span><span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="n">jwtInterceptor</span><span class="o">())</span><span class="c1">//配置jwt的拦截器规则
</span><span class="c1"></span>            <span class="o">.</span><span class="na">addPathPatterns</span><span class="o">(</span><span class="s">&#34;/**&#34;</span><span class="o">)</span><span class="c1">//拦截所有的请求路径
</span><span class="c1"></span>            <span class="o">.</span><span class="na">excludePathPatterns</span><span class="o">(</span><span class="s">&#34;/login&#34;</span><span class="o">);</span><span class="c1">//排除拦截
</span><span class="c1"></span>            
    <span class="kd">super</span><span class="o">.</span><span class="na">addInterceptors</span><span class="o">(</span><span class="n">registry</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;200&#34;</span><span class="p">,</span>
    <span class="nt">&#34;msg&#34;</span><span class="p">:</span> <span class="s2">&#34;请求成功&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
        <span class="nt">&#34;username&#34;</span><span class="p">:</span> <span class="s2">&#34;admin&#34;</span><span class="p">,</span>
        <span class="nt">&#34;password&#34;</span><span class="p">:</span> <span class="s2">&#34;admin&#34;</span><span class="p">,</span>
        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&#34;phone&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&#34;token&#34;</span><span class="p">:</span> <span class="s2">&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxNCIsImV4cCI6MTcyNDczNjQ5NX0.2EFDXBvKmgGQY8NeirMbjpbBO3TVveSSo3nLIDBe72I&#34;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>在前端有了token，需要在所有接口都加上token</p>
<p>前端登录成功后，数据保存到了 user-data中</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="c1">//login.vue
</span><span class="c1"></span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&#34;user-data&#34;</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/2024/70.png" alt=""></p>
<p>在请求工具request.js中 添加请求头token</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">//定义请求参数 request拦截器 可以自请求发送前对请求做一些处理，比如统一加token，对请求参数统一加密
</span><span class="c1"></span><span class="nx">request</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">config</span> <span class="p">=&gt;{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;application/json;charset=utf-8&#39;</span><span class="p">;</span>
    <span class="c1">//拿到user对象 拿到token
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&#34;user-data&#34;</span><span class="p">)</span><span class="o">||</span><span class="s1">&#39;{}&#39;</span><span class="p">)</span>
    <span class="c1">//设置请求头
</span><span class="c1"></span>    <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">token</span>
    <span class="k">return</span> <span class="nx">config</span>
<span class="p">},</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;request error: &#39;</span><span class="o">+</span><span class="nx">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>此时selectall请求成功，请求头中包含了token，就是登录接口返回的token，在每次请求的时候都会带着token作为验证信息</p>
<p><img src="/images/2024/71.png" alt=""></p>
<p>在应用界面，清除本地存储空间，数据就加载不出来了，http://localhost:9090/selectall访问不了</p>
<p>没有权限，跳转登录界面</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">request</span><span class="o">.</span><span class="na">interceptors</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">use</span><span class="o">(</span>
    <span class="n">response</span><span class="o">=&gt;{</span>
        <span class="n">let</span> <span class="n">res</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="na">data</span><span class="o">;</span>
        <span class="c1">//兼容服务器端返回的字符串数据
</span><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">typeof</span> <span class="n">res</span><span class="o">===</span><span class="err">&#39;</span><span class="n">string</span><span class="err">&#39;</span><span class="o">){</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span> <span class="o">?</span> <span class="n">JSON</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">res</span><span class="o">)</span> <span class="o">:</span> <span class="n">res</span>
        <span class="o">}</span>
        <span class="c1">//没有权限，跳转到登录界面
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">code</span> <span class="o">===</span> <span class="err">&#39;</span><span class="n">401</span><span class="err">&#39;</span><span class="o">){</span>
            <span class="n">router</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&#34;/login&#34;</span><span class="o">)</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">;</span>
    <span class="o">},</span>
    <span class="n">error</span> <span class="o">=&gt;</span> <span class="o">{</span>
        <span class="n">console</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="err">&#39;</span><span class="n">response</span> <span class="n">error</span><span class="o">:</span> <span class="err">&#39;</span><span class="o">+</span><span class="n">error</span><span class="o">)</span>
        <span class="k">return</span> <span class="n">Promise</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="n">error</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>退出登录后，清理本地存储的token</p>
<p>homeview.vue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">el-dropdown-item</span> <span class="nt">@click.native</span><span class="s">=&#34;logout&#34;</span><span class="p">&gt;</span><span class="nx">退出登录</span><span class="o">&lt;</span><span class="err">/el-dropdown-item&gt;</span>
<span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">logout</span><span class="p">(){</span>
   		<span class="c1">//清除本地存储用户数据和token
</span><span class="c1"></span>      	<span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s1">&#39;user-data&#39;</span><span class="p">)</span>

      	<span class="c1">//跳转登录页面
</span><span class="c1"></span>      	<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>  
    <span class="p">},</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><p>但是注册也会被拦截，通过自定义注解，解除拦截</p>
<h3 id="自定义注解">自定义注解</h3>
<p>AuthAccess</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Target</span><span class="o">(</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">AuthAccess</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>JwtInterceptor</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>

    <span class="nd">@Resource</span>
    <span class="kd">private</span> <span class="n">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span><span class="n">Object</span> <span class="n">handle</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//header里面传来的参数
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">token</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">&#34;token&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">token</span><span class="o">)){</span>
            <span class="c1">//url参数  ?token=xxx
</span><span class="c1"></span>            <span class="n">token</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;token&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="c1">//通过这个方法可以拿到自定义的注解AuthAccess
</span><span class="c1"></span>        <span class="c1">//如果包含注解直接通过，不需要后续认证 直接通过
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">handle</span> <span class="k">instanceof</span> <span class="n">HandlerMethod</span><span class="o">){</span>
            <span class="n">AuthAccess</span> <span class="n">annotation</span><span class="o">=((</span><span class="n">HandlerMethod</span><span class="o">)</span> <span class="n">handle</span><span class="o">).</span><span class="na">getMethodAnnotation</span><span class="o">(</span><span class="n">AuthAccess</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">annotation</span> <span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//执行认证 没有token抛出异常
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">StrUtil</span><span class="o">.</span><span class="na">isBlank</span><span class="o">(</span><span class="n">token</span><span class="o">)){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//获取token中的userid
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">userId</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">userId</span><span class="o">=</span> <span class="n">JWT</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getAudience</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">JWTDecodeException</span> <span class="n">j</span><span class="o">){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//根据token中的userid查询数据库,字符串转为数字
</span><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">userId</span><span class="o">));</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span><span class="kc">null</span><span class="o">){</span>
            <span class="c1">//数据库中查不到数据
</span><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//通过用户密码加密之后生成一个验证器
</span><span class="c1"></span>        <span class="n">JWTVerifier</span> <span class="n">jwtVerifier</span> <span class="o">=</span> <span class="n">JWT</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="na">HMAC256</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())).</span><span class="na">build</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">jwtVerifier</span><span class="o">.</span><span class="na">verify</span><span class="o">(</span><span class="n">token</span><span class="o">);</span><span class="c1">//验证token
</span><span class="c1"></span>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JWTVerificationException</span> <span class="n">e</span><span class="o">){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ServiceException</span><span class="o">(</span><span class="s">&#34;401&#34;</span><span class="o">,</span><span class="s">&#34;请登录&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>controller 添加注解</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@AuthAccess</span>
<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/register&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Result</span> <span class="nf">register</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">kong</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2024-08-14
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/ctsp/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Ctsp</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/springbootp-jpa/">
            <span class="next-text nav-default">Springboot-jpa</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=_JOXlp_emZaBjZ3IwcrMuImJ1puXlQ" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/kongfany" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/u/5947688533?is_all=1" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/yu-ni-zhong-nian-bu-yu" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://space.bilibili.com/232669848" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://kongfany.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2024<span class="heart"><i class="iconfont icon-heart"></i></span><span>kong</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script type="text/javascript" async src="/lib/mathjax/es5/tex-mml-chtml.js"></script>








</body>
</html>
